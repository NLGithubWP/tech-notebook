<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link media="all" rel="stylesheet" type="text/css" href="https://nlgithubwp.github.io/css/pygments.css" />
   <meta property="og:url" content="https://nlgithubwp.github.io/journal/cockroachDB-exp/" />
   <link rel="canonical" href="https://nlgithubwp.github.io/journal/cockroachDB-exp/" />


  <link rel="shortcut icon" href="/favicon.ico?" type="image/x-icon">
<link rel="icon" href="/tech-notebook/favicon.ico?" type="image/x-icon">

    <meta name="description" content="It's the niceties that make the difference fate gives us the hand, and we play the cards.">

    <title>cockroachDB-exp - NoteBook</title>

    <link rel="canonical" href="https://nlgithubwp.github.io/tech-notebook/journal/cockroachDB-exp/">

<!-- CSS -->
	
    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/tech-notebook/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/tech-notebook/css/main.css">
    <link rel="stylesheet" href="/tech-notebook/css/galleries.css">
     <link rel="stylesheet" href="/tech-notebook/css/super-search.css">
    <link rel="stylesheet" href="/tech-notebook/css/magnificpopup.css">
    <link rel="stylesheet" href="/tech-notebook/css/pygments.css">

    <!-- Custom Fonts -->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Josefin+Sans:400,600&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->


</head>


<head>

</head>

<body>

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top" style="margin-right:1em; z-index: 1;">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <i class="fa fa-bars fa-lg"></i>
            </button>
            <a href="/tech-notebook/" title="HOME"><img src="/tech-notebook/img/logos/logo6.png" alt="logo" style="width:150px;cursor:pointer;margin-top:15px;"/></a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right" style="margin-right:1em; text-shadow: -.025em -.025em 0 rgba(0, 133, 161, 0.75), .025em -.025em 0 rgba(0, 133, 161, 0.75), -.025em .025em 0 rgba(0, 133, 161, 0.75), .025em .025em 0 rgba(0, 133, 161, 0.75);">
               
          
            
            
              <li><a href="https://nlgithubwp.github.io/tech-notebook/gallery/">GALLERY</a></li>
            
          
        
          
            
            
              <li class="active"><a href="https://nlgithubwp.github.io/tech-notebook/journal/">JOURNAL</a></li>
            
          
        
          
            
            
              <li><a href="https://nlgithubwp.github.io/tech-notebook/about/">ABOUT</a></li>
            
          
        
          
            
            
              <li><a href="https://nlgithubwp.github.io/tech-notebook/resume/">CV</a></li>
            
          
        
                            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>



    <html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        
        <meta name="viewport" content="width=device-width">

<link href="/tech-notebook/css/tags-wrap.css" rel="stylesheet" />
  
    </head>
    <body>
  



<article>
<!-- Post Header -->
<header class="intro-header" style="background-image: url('/tech-notebook/img/postcover/post02.jpg')">
    <div class="container">
        <div class="row">
            <div class="post-heading">
                    <h1 style="color: #acd578;">cockroachDB-exp</h1>
                    
                    <span class="meta">Posted on August 12, 2021</span>

<span class="time-tag-categ" style="font-size:.7em;background-color: rgba(128, 128, 128, 0.45);">


<i class="fa fa-clock-o"></i>&nbsp;
128 minute read



 


  
   &sim; Filed in <i class="fa fa-briefcase"></i>&nbsp;:&nbsp;<a href="/tech-notebook/journal/category/practise/" data-toggle="tooltip" title="Other posts filed in practise category" rel="tag">practise</a>    
                    
   </span>

            </div>
        </div>
    </div>
</header>

<!-- Post Content -->

    <div class="container">
        <div class="row">
            

             <h1 id="restart-the-whole-cluster">Restart the whole cluster</h1>

<h2 id="secure">Secure</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ps aux | <span class="nb">grep </span>cockroach | <span class="nb">awk</span> <span class="s1">'{print $2}'</span> | xargs <span class="nb">kill</span> <span class="nt">-9</span> 
<span class="nb">rm</span> <span class="nt">-rf</span> my-safe-directory
<span class="nb">rm</span> <span class="nt">-rf</span> certs
<span class="nb">rm</span> <span class="nt">-rf</span> node<span class="k">*</span>

<span class="nb">mkdir </span>certs my-safe-directory

cockroach cert create-ca <span class="se">\</span>
    <span class="nt">--certs-dir</span><span class="o">=</span>certs <span class="se">\</span>
    <span class="nt">--ca-key</span><span class="o">=</span>my-safe-directory/ca.key

cockroach cert create-node <span class="se">\</span>
    localhost <span class="se">\</span>
    <span class="si">$(</span><span class="nb">hostname</span><span class="si">)</span> <span class="se">\</span>
    <span class="nt">--certs-dir</span><span class="o">=</span>certs <span class="se">\</span>
    <span class="nt">--ca-key</span><span class="o">=</span>my-safe-directory/ca.key

cockroach cert create-client <span class="se">\</span>
    root <span class="se">\</span>
    <span class="nt">--certs-dir</span><span class="o">=</span>certs <span class="se">\</span>
    <span class="nt">--ca-key</span><span class="o">=</span>my-safe-directory/ca.key


cockroach start <span class="se">\</span>
        <span class="nt">--certs-dir</span><span class="o">=</span>certs <span class="se">\</span>
        <span class="nt">--store</span><span class="o">=</span>node1 <span class="se">\</span>
        <span class="nt">--listen-addr</span><span class="o">=</span>localhost:26257 <span class="se">\</span>
        <span class="nt">--http-addr</span><span class="o">=</span>localhost:8280 <span class="se">\</span>
        <span class="nt">--join</span><span class="o">=</span>localhost:26257,localhost:26258,localhost:26259,localhost:26260,localhost:26261 <span class="se">\</span>
        <span class="nt">--background</span>

cockroach start <span class="se">\</span>
        <span class="nt">--certs-dir</span><span class="o">=</span>certs <span class="se">\</span>
        <span class="nt">--store</span><span class="o">=</span>node2 <span class="se">\</span>
        <span class="nt">--listen-addr</span><span class="o">=</span>localhost:26258 <span class="se">\</span>
        <span class="nt">--http-addr</span><span class="o">=</span>localhost:8281 <span class="se">\</span>
        <span class="nt">--join</span><span class="o">=</span>localhost:26257,localhost:26258,localhost:26259,localhost:26260,localhost:26261 <span class="se">\</span>
        <span class="nt">--background</span>

cockroach start <span class="se">\</span>
        <span class="nt">--certs-dir</span><span class="o">=</span>certs <span class="se">\</span>
        <span class="nt">--store</span><span class="o">=</span>node3 <span class="se">\</span>
        <span class="nt">--listen-addr</span><span class="o">=</span>localhost:26259 <span class="se">\</span>
        <span class="nt">--http-addr</span><span class="o">=</span>localhost:8282 <span class="se">\</span>
        <span class="nt">--join</span><span class="o">=</span>localhost:26257,localhost:26258,localhost:26259,localhost:26260,localhost:26261 <span class="se">\</span>
        <span class="nt">--background</span>

cockroach start <span class="se">\</span>
        <span class="nt">--certs-dir</span><span class="o">=</span>certs <span class="se">\</span>
        <span class="nt">--store</span><span class="o">=</span>node4 <span class="se">\</span>
        <span class="nt">--listen-addr</span><span class="o">=</span>localhost:26260 <span class="se">\</span>
        <span class="nt">--http-addr</span><span class="o">=</span>localhost:8283 <span class="se">\</span>
        <span class="nt">--join</span><span class="o">=</span>localhost:26257,localhost:26258,localhost:26259,localhost:26260,localhost:26261 <span class="se">\</span>
        <span class="nt">--background</span>
cockroach start <span class="se">\</span>
        <span class="nt">--certs-dir</span><span class="o">=</span>certs <span class="se">\</span>
        <span class="nt">--store</span><span class="o">=</span>node5 <span class="se">\</span>
        <span class="nt">--listen-addr</span><span class="o">=</span>localhost:26261 <span class="se">\</span>
        <span class="nt">--http-addr</span><span class="o">=</span>localhost:8284 <span class="se">\</span>
        <span class="nt">--join</span><span class="o">=</span>localhost:26257,localhost:26258,localhost:26259,localhost:26260,localhost:26261 <span class="se">\</span>
        <span class="nt">--background</span>

cockroach init <span class="nt">--certs-dir</span><span class="o">=</span>certs <span class="nt">--host</span><span class="o">=</span>localhost:26257

ps aux | <span class="nb">grep </span>cock
cockroach sql <span class="nt">--certs-dir</span><span class="o">=</span>certs <span class="nt">--host</span><span class="o">=</span>localhost:26257
USE cs5424db<span class="p">;</span>
<span class="nb">set </span>search_path to workloadA<span class="p">;</span>
alter user naili with password naili<span class="p">;</span>
</code></pre></div></div>

<h2 id="insecure">Insecure</h2>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cockroach</span> <span class="k">start</span> <span class="err">\</span>
        <span class="c1">--insecure \</span>
        <span class="c1">--store=node1 \</span>
        <span class="c1">--listen-addr=localhost:26257 \</span>
        <span class="c1">--http-addr=localhost:8280 \</span>
        <span class="c1">--join=localhost:26257,localhost:26258,localhost:26259,localhost:26260,localhost:26261 \</span>
        <span class="c1">--background</span>

<span class="n">cockroach</span> <span class="k">start</span> <span class="err">\</span>
        <span class="c1">--insecure \</span>
        <span class="c1">--store=node2 \</span>
        <span class="c1">--listen-addr=localhost:26258 \</span>
        <span class="c1">--http-addr=localhost:8281 \</span>
        <span class="c1">--join=localhost:26257,localhost:26258,localhost:26259,localhost:26260,localhost:26261 \</span>
        <span class="c1">--background</span>

<span class="n">cockroach</span> <span class="k">start</span> <span class="err">\</span>
        <span class="c1">--insecure \</span>
        <span class="c1">--store=node3 \</span>
        <span class="c1">--listen-addr=localhost:26259 \</span>
        <span class="c1">--http-addr=localhost:8282 \</span>
        <span class="c1">--join=localhost:26257,localhost:26258,localhost:26259,localhost:26260,localhost:26261 \</span>
        <span class="c1">--background</span>

<span class="n">cockroach</span> <span class="k">start</span> <span class="err">\</span>
        <span class="c1">--insecure \</span>
        <span class="c1">--store=node4 \</span>
        <span class="c1">--listen-addr=localhost:26260 \</span>
        <span class="c1">--http-addr=localhost:8283 \</span>
        <span class="c1">--join=localhost:26257,localhost:26258,localhost:26259,localhost:26260,localhost:26261 \</span>
        <span class="c1">--background</span>
<span class="n">cockroach</span> <span class="k">start</span> <span class="err">\</span>
        <span class="c1">--insecure \</span>
        <span class="c1">--store=node5 \</span>
        <span class="c1">--listen-addr=localhost:26261 \</span>
        <span class="c1">--http-addr=localhost:8284 \</span>
        <span class="c1">--join=localhost:26257,localhost:26258,localhost:26259,localhost:26260,localhost:26261 \</span>
        <span class="c1">--background</span>

<span class="n">cockroach</span> <span class="n">init</span> <span class="c1">--insecure --host=localhost:26257</span>

<span class="n">cockroach</span> <span class="k">sql</span> <span class="c1">--insecure --host=localhost:26257</span>

<span class="n">USE</span> <span class="n">cs5424db</span><span class="p">;</span>
<span class="k">set</span> <span class="n">search_path</span> <span class="k">to</span> <span class="n">workloadA</span><span class="p">;</span>
<span class="k">alter</span> <span class="k">user</span> <span class="n">naili</span> <span class="k">with</span> <span class="n">password</span> <span class="n">naili</span><span class="p">;</span>
</code></pre></div></div>

<h1 id="create-table-and-import-data">Create table and import data</h1>

<h2 id="1-create-table-load-create_index-slow">1. create table, load, create_index (slow)</h2>

<h3 id="example1">Example1</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">IF</span> <span class="k">NOT</span> <span class="k">EXISTS</span> <span class="n">cs5424db</span><span class="p">.</span><span class="n">workloadA</span><span class="p">.</span><span class="n">order_ori</span> <span class="p">(</span>
    <span class="n">pid</span> <span class="n">UUID</span> <span class="k">DEFAULT</span> <span class="n">gen_random_uuid</span><span class="p">()</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
    <span class="n">O_W_ID</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">O_D_ID</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">O_ID</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">O_C_ID</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">O_CARRIER_ID</span> <span class="nb">INT</span><span class="p">,</span>
    <span class="n">O_OL_CNT</span> <span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">O_ALL_LOCAL</span> <span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">O_ENTRY_D</span> <span class="n">TIMESTAMPTZ</span> <span class="k">DEFAULT</span> <span class="n">now</span><span class="p">(),</span>
    <span class="n">FAMILY</span> <span class="n">freqWrite</span> <span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">O_W_ID</span><span class="p">,</span> <span class="n">O_D_ID</span><span class="p">,</span> <span class="n">O_ID</span><span class="p">,</span> <span class="n">O_CARRIER_ID</span><span class="p">),</span>
    <span class="n">FAMILY</span> <span class="n">freqRead</span> <span class="p">(</span><span class="n">O_C_ID</span><span class="p">,</span> <span class="n">O_OL_CNT</span><span class="p">,</span> <span class="n">O_ALL_LOCAL</span><span class="p">,</span> <span class="n">O_ENTRY_D</span><span class="p">));</span>

<span class="n">IMPORT</span> <span class="k">INTO</span> <span class="n">cs5424db</span><span class="p">.</span><span class="n">workloadA</span><span class="p">.</span><span class="n">order_ori</span> <span class="p">(</span><span class="n">O_W_ID</span><span class="p">,</span> <span class="n">O_D_ID</span><span class="p">,</span> <span class="n">O_ID</span><span class="p">,</span> <span class="n">O_C_ID</span><span class="p">,</span> <span class="n">O_CARRIER_ID</span><span class="p">,</span> <span class="n">O_OL_CNT</span><span class="p">,</span> <span class="n">O_ALL_LOCAL</span><span class="p">,</span> <span class="n">O_ENTRY_D</span><span class="p">)</span> <span class="n">CSV</span> <span class="k">DATA</span> <span class="p">(</span><span class="s1">'http://localhost:3000/opt/project_files/data_files_A/order.csv'</span><span class="p">)</span> <span class="k">WITH</span> <span class="k">delimiter</span> <span class="o">=</span> <span class="n">e</span><span class="s1">','</span><span class="p">,</span> <span class="k">nullif</span> <span class="o">=</span> <span class="s1">'null'</span><span class="p">;</span>

<span class="nb">Time</span><span class="p">:</span> <span class="mi">8</span><span class="p">.</span><span class="mi">390</span><span class="n">s</span> <span class="n">total</span> <span class="p">(</span><span class="n">execution</span> <span class="mi">8</span><span class="p">.</span><span class="mi">390</span><span class="n">s</span> <span class="o">/</span> <span class="n">network</span> <span class="mi">0</span><span class="p">.</span><span class="mi">000</span><span class="n">s</span><span class="p">)</span>

<span class="k">CREATE</span> <span class="k">INDEX</span> <span class="k">ON</span> <span class="n">cs5424db</span><span class="p">.</span><span class="n">workloadA</span><span class="p">.</span><span class="n">order_ori</span> <span class="p">(</span><span class="n">o_w_id</span><span class="p">,</span> <span class="n">o_d_id</span><span class="p">,</span> <span class="n">o_id</span><span class="p">,</span> <span class="n">o_carrier_id</span><span class="p">);</span>
<span class="k">CREATE</span> <span class="k">INDEX</span> <span class="k">ON</span> <span class="n">cs5424db</span><span class="p">.</span><span class="n">workloadA</span><span class="p">.</span><span class="n">order_ori</span> <span class="p">(</span><span class="n">o_w_id</span><span class="p">,</span> <span class="n">o_d_id</span><span class="p">,</span> <span class="n">o_c_id</span><span class="p">);</span>
<span class="k">CREATE</span> <span class="k">INDEX</span> <span class="k">ON</span> <span class="n">cs5424db</span><span class="p">.</span><span class="n">workloadA</span><span class="p">.</span><span class="n">order_ori</span> <span class="p">(</span><span class="n">o_c_id</span><span class="p">);</span>
<span class="k">CREATE</span> <span class="k">INDEX</span> <span class="k">ON</span> <span class="n">cs5424db</span><span class="p">.</span><span class="n">workloadA</span><span class="p">.</span><span class="n">order_ori</span> <span class="p">(</span><span class="n">o_entry_d</span><span class="p">);</span>

<span class="nb">Time</span><span class="p">:</span> <span class="mi">9</span><span class="p">.</span><span class="mi">017</span><span class="n">s</span> <span class="n">total</span> <span class="p">(</span><span class="n">execution</span> <span class="mi">9</span><span class="p">.</span><span class="mi">017</span><span class="n">s</span> <span class="o">/</span> <span class="n">network</span> <span class="mi">0</span><span class="p">.</span><span class="mi">000</span><span class="n">s</span><span class="p">)</span>
<span class="k">CREATE</span> <span class="k">INDEX</span>
<span class="nb">Time</span><span class="p">:</span> <span class="mi">6</span><span class="p">.</span><span class="mi">881</span><span class="n">s</span> <span class="n">total</span> <span class="p">(</span><span class="n">execution</span> <span class="mi">6</span><span class="p">.</span><span class="mi">881</span><span class="n">s</span> <span class="o">/</span> <span class="n">network</span> <span class="mi">0</span><span class="p">.</span><span class="mi">000</span><span class="n">s</span><span class="p">)</span>
<span class="k">CREATE</span> <span class="k">INDEX</span>
<span class="nb">Time</span><span class="p">:</span> <span class="mi">6</span><span class="p">.</span><span class="mi">905</span><span class="n">s</span> <span class="n">total</span> <span class="p">(</span><span class="n">execution</span> <span class="mi">6</span><span class="p">.</span><span class="mi">905</span><span class="n">s</span> <span class="o">/</span> <span class="n">network</span> <span class="mi">0</span><span class="p">.</span><span class="mi">000</span><span class="n">s</span><span class="p">)</span>
<span class="k">CREATE</span> <span class="k">INDEX</span>
<span class="nb">Time</span><span class="p">:</span> <span class="mi">6</span><span class="p">.</span><span class="mi">903</span><span class="n">s</span> <span class="n">total</span> <span class="p">(</span><span class="n">execution</span> <span class="mi">6</span><span class="p">.</span><span class="mi">903</span><span class="n">s</span> <span class="o">/</span> <span class="n">network</span> <span class="mi">0</span><span class="p">.</span><span class="mi">000</span><span class="n">s</span><span class="p">)</span>

</code></pre></div></div>

<h3 id="example2-3000k">Example2 (3000k)</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">IF</span> <span class="k">NOT</span> <span class="k">EXISTS</span> <span class="n">cs5424db</span><span class="p">.</span><span class="n">workloadA</span><span class="p">.</span><span class="n">order_line</span> <span class="p">(</span>
    <span class="n">pid</span> <span class="n">UUID</span> <span class="k">DEFAULT</span> <span class="n">gen_random_uuid</span><span class="p">()</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
    <span class="n">OL_W_ID</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">OL_D_ID</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">OL_O_ID</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">OL_NUMBER</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">OL_I_ID</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">OL_DELIVERY_D</span> <span class="n">TIMESTAMPTZ</span> <span class="k">DEFAULT</span> <span class="n">now</span><span class="p">(),</span>
    <span class="n">OL_AMOUNT</span> <span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">OL_SUPPLY_W_ID</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">OL_QUANTITY</span> <span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">OL_DIST_INFO</span> <span class="nb">CHAR</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">FAMILY</span> <span class="n">freqRead</span> <span class="p">(</span><span class="n">OL_I_ID</span><span class="p">,</span> <span class="n">OL_AMOUNT</span><span class="p">,</span> <span class="n">OL_SUPPLY_W_ID</span><span class="p">,</span> <span class="n">OL_QUANTITY</span><span class="p">,</span> <span class="n">OL_DIST_INFO</span><span class="p">),</span>
    <span class="n">FAMILY</span> <span class="n">freqWrite</span> <span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">ol_w_id</span><span class="p">,</span> <span class="n">ol_d_id</span><span class="p">,</span> <span class="n">ol_o_id</span><span class="p">,</span> <span class="n">ol_number</span><span class="p">,</span> <span class="n">OL_DELIVERY_D</span><span class="p">));</span>

<span class="n">IMPORT</span> <span class="k">INTO</span> <span class="n">cs5424db</span><span class="p">.</span><span class="n">workloadA</span><span class="p">.</span><span class="n">order_line</span> <span class="p">(</span><span class="n">ol_w_id</span><span class="p">,</span> <span class="n">ol_d_id</span><span class="p">,</span> <span class="n">ol_o_id</span><span class="p">,</span> <span class="n">ol_number</span><span class="p">,</span> <span class="n">OL_I_ID</span><span class="p">,</span> <span class="n">OL_DELIVERY_D</span><span class="p">,</span> <span class="n">OL_AMOUNT</span><span class="p">,</span> <span class="n">OL_SUPPLY_W_ID</span><span class="p">,</span> <span class="n">OL_QUANTITY</span><span class="p">,</span> <span class="n">OL_DIST_INFO</span><span class="p">)</span> <span class="n">CSV</span> <span class="k">DATA</span> <span class="p">(</span><span class="s1">'http://localhost:3000/opt/project_files/data_files_A/order-line.csv'</span><span class="p">)</span> <span class="k">WITH</span> <span class="k">delimiter</span> <span class="o">=</span> <span class="n">e</span><span class="s1">','</span><span class="p">,</span> <span class="k">nullif</span> <span class="o">=</span> <span class="s1">'null'</span><span class="p">;</span>

<span class="nb">Time</span><span class="p">:</span> <span class="mi">124</span><span class="p">.</span><span class="mi">034</span><span class="n">s</span> <span class="n">total</span> <span class="p">(</span><span class="n">execution</span> <span class="mi">124</span><span class="p">.</span><span class="mi">033</span><span class="n">s</span> <span class="o">/</span> <span class="n">network</span> <span class="mi">0</span><span class="p">.</span><span class="mi">000</span><span class="n">s</span><span class="p">)</span>

<span class="k">CREATE</span> <span class="k">INDEX</span> <span class="k">ON</span> <span class="n">cs5424db</span><span class="p">.</span><span class="n">workloadA</span><span class="p">.</span><span class="n">order_line</span> <span class="p">(</span><span class="n">ol_w_id</span><span class="p">,</span> <span class="n">ol_d_id</span><span class="p">,</span> <span class="n">ol_o_id</span><span class="p">,</span> <span class="n">ol_number</span><span class="p">);</span>

<span class="nb">Time</span><span class="p">:</span> <span class="mi">64</span><span class="p">.</span><span class="mi">249</span><span class="n">s</span> <span class="n">total</span> <span class="p">(</span><span class="n">execution</span> <span class="mi">64</span><span class="p">.</span><span class="mi">248</span><span class="n">s</span> <span class="o">/</span> <span class="n">network</span> <span class="mi">0</span><span class="p">.</span><span class="mi">001</span><span class="n">s</span><span class="p">)</span>  
</code></pre></div></div>

<h2 id="2-create-table-with-index-load-quick">2. Create table with index, load (quick)</h2>

<h3 id="example1-1">Example1</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">IF</span> <span class="k">NOT</span> <span class="k">EXISTS</span> <span class="n">cs5424db</span><span class="p">.</span><span class="n">workloadA</span><span class="p">.</span><span class="n">order_ori</span> <span class="p">(</span>
    <span class="n">pid</span> <span class="n">UUID</span> <span class="k">DEFAULT</span> <span class="n">gen_random_uuid</span><span class="p">()</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
    <span class="n">O_W_ID</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">O_D_ID</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">O_ID</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">O_C_ID</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">O_CARRIER_ID</span> <span class="nb">INT</span><span class="p">,</span>
    <span class="n">O_OL_CNT</span> <span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">O_ALL_LOCAL</span> <span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">O_ENTRY_D</span> <span class="n">TIMESTAMPTZ</span> <span class="k">DEFAULT</span> <span class="n">now</span><span class="p">(),</span>
    <span class="n">FAMILY</span> <span class="n">freqWrite</span> <span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">O_W_ID</span><span class="p">,</span> <span class="n">O_D_ID</span><span class="p">,</span> <span class="n">O_ID</span><span class="p">,</span> <span class="n">O_CARRIER_ID</span><span class="p">),</span>
    <span class="n">FAMILY</span> <span class="n">freqRead</span> <span class="p">(</span><span class="n">O_C_ID</span><span class="p">,</span> <span class="n">O_OL_CNT</span><span class="p">,</span> <span class="n">O_ALL_LOCAL</span><span class="p">,</span> <span class="n">O_ENTRY_D</span><span class="p">),</span>
    <span class="k">INDEX</span> <span class="n">order_ori_joint_id</span> <span class="p">(</span><span class="n">o_w_id</span><span class="p">,</span> <span class="n">o_d_id</span><span class="p">,</span> <span class="n">o_id</span><span class="p">,</span> <span class="n">o_carrier_id</span><span class="p">),</span>
    <span class="k">INDEX</span> <span class="n">order_ori_joint_c_id</span> <span class="p">(</span><span class="n">o_w_id</span><span class="p">,</span> <span class="n">o_d_id</span><span class="p">,</span> <span class="n">o_c_id</span><span class="p">),</span>
    <span class="k">INDEX</span> <span class="n">order_ori_c_id</span> <span class="p">(</span><span class="n">o_c_id</span><span class="p">),</span>
    <span class="k">INDEX</span> <span class="n">order_ori_entry_d</span> <span class="p">(</span><span class="n">o_entry_d</span><span class="p">));</span>
    
<span class="n">IMPORT</span> <span class="k">INTO</span> <span class="n">cs5424db</span><span class="p">.</span><span class="n">workloadA</span><span class="p">.</span><span class="n">order_ori</span> <span class="p">(</span><span class="n">O_W_ID</span><span class="p">,</span> <span class="n">O_D_ID</span><span class="p">,</span> <span class="n">O_ID</span><span class="p">,</span> <span class="n">O_C_ID</span><span class="p">,</span> <span class="n">O_CARRIER_ID</span><span class="p">,</span> <span class="n">O_OL_CNT</span><span class="p">,</span> <span class="n">O_ALL_LOCAL</span><span class="p">,</span> <span class="n">O_ENTRY_D</span><span class="p">)</span>  <span class="n">CSV</span> <span class="k">DATA</span> <span class="p">(</span><span class="s1">'http://localhost:3000/opt/project_files/data_files_A/order.csv'</span><span class="p">)</span> <span class="k">WITH</span> <span class="k">delimiter</span> <span class="o">=</span> <span class="n">e</span><span class="s1">','</span><span class="p">,</span> <span class="k">nullif</span> <span class="o">=</span> <span class="s1">'null'</span><span class="p">;</span>

<span class="nb">Time</span><span class="p">:</span> <span class="mi">18</span><span class="p">.</span><span class="mi">825</span><span class="n">s</span> <span class="n">total</span> <span class="p">(</span><span class="n">execution</span> <span class="mi">18</span><span class="p">.</span><span class="mi">824</span><span class="n">s</span> <span class="o">/</span> <span class="n">network</span> <span class="mi">0</span><span class="p">.</span><span class="mi">001</span><span class="n">s</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="example2-3000k-1">Example2 (3000k)</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">IF</span> <span class="k">NOT</span> <span class="k">EXISTS</span> <span class="n">cs5424db</span><span class="p">.</span><span class="n">workloadA</span><span class="p">.</span><span class="n">order_line</span> <span class="p">(</span>
    <span class="n">pid</span> <span class="n">UUID</span> <span class="k">DEFAULT</span> <span class="n">gen_random_uuid</span><span class="p">()</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
    <span class="n">OL_W_ID</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">OL_D_ID</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">OL_O_ID</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">OL_NUMBER</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">OL_I_ID</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">OL_DELIVERY_D</span> <span class="n">TIMESTAMPTZ</span> <span class="k">DEFAULT</span> <span class="n">now</span><span class="p">(),</span>
    <span class="n">OL_AMOUNT</span> <span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">OL_SUPPLY_W_ID</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">OL_QUANTITY</span> <span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">OL_DIST_INFO</span> <span class="nb">CHAR</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">FAMILY</span> <span class="n">freqRead</span> <span class="p">(</span><span class="n">OL_I_ID</span><span class="p">,</span> <span class="n">OL_AMOUNT</span><span class="p">,</span> <span class="n">OL_SUPPLY_W_ID</span><span class="p">,</span> <span class="n">OL_QUANTITY</span><span class="p">,</span> <span class="n">OL_DIST_INFO</span><span class="p">),</span>
    <span class="n">FAMILY</span> <span class="n">freqWrite</span> <span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">ol_w_id</span><span class="p">,</span> <span class="n">ol_d_id</span><span class="p">,</span> <span class="n">ol_o_id</span><span class="p">,</span> <span class="n">ol_number</span><span class="p">,</span> <span class="n">OL_DELIVERY_D</span><span class="p">),</span>
    <span class="k">INDEX</span> <span class="n">order_line_joint_id</span> <span class="p">(</span><span class="n">ol_w_id</span><span class="p">,</span> <span class="n">ol_d_id</span><span class="p">,</span> <span class="n">ol_o_id</span><span class="p">,</span> <span class="n">ol_number</span><span class="p">));</span>

<span class="n">IMPORT</span> <span class="k">INTO</span> <span class="n">cs5424db</span><span class="p">.</span><span class="n">workloadA</span><span class="p">.</span><span class="n">order_line</span> <span class="p">(</span><span class="n">ol_w_id</span><span class="p">,</span> <span class="n">ol_d_id</span><span class="p">,</span> <span class="n">ol_o_id</span><span class="p">,</span> <span class="n">ol_number</span><span class="p">,</span> <span class="n">OL_I_ID</span><span class="p">,</span> <span class="n">OL_DELIVERY_D</span><span class="p">,</span> <span class="n">OL_AMOUNT</span><span class="p">,</span> <span class="n">OL_SUPPLY_W_ID</span><span class="p">,</span> <span class="n">OL_QUANTITY</span><span class="p">,</span> <span class="n">OL_DIST_INFO</span><span class="p">)</span>
    <span class="n">CSV</span> <span class="k">DATA</span> <span class="p">(</span><span class="s1">'http://localhost:3000/opt/project_files/data_files_A/order-line.csv'</span><span class="p">)</span>
    <span class="k">WITH</span> <span class="k">delimiter</span> <span class="o">=</span> <span class="n">e</span><span class="s1">','</span><span class="p">,</span> <span class="k">nullif</span> <span class="o">=</span> <span class="s1">'null'</span><span class="p">;</span>
    
<span class="nb">Time</span><span class="p">:</span> <span class="mi">151</span><span class="p">.</span><span class="mi">911</span><span class="n">s</span> <span class="n">total</span> <span class="p">(</span><span class="n">execution</span> <span class="mi">151</span><span class="p">.</span><span class="mi">911</span><span class="n">s</span> <span class="o">/</span> <span class="n">network</span> <span class="mi">0</span><span class="p">.</span><span class="mi">000</span><span class="n">s</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="3-read-optimizaiton">3. Read optimizaiton:</h2>

<h4 id="follower-read">Follower read</h4>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">I_PRICE</span><span class="p">,</span> <span class="n">I_NAME</span> <span class="k">FROM</span> <span class="n">item</span> <span class="k">AS</span> <span class="k">OF</span> <span class="k">SYSTEM</span> <span class="nb">TIME</span> <span class="n">follower_read_timestamp</span><span class="p">()</span> <span class="k">WHERE</span> <span class="n">I_ID</span> <span class="k">in</span> <span class="p">(</span><span class="mi">34981</span><span class="p">,</span> <span class="mi">77989</span><span class="p">,</span> <span class="mi">73381</span><span class="p">,</span> <span class="mi">28351</span><span class="p">,</span> <span class="mi">40577</span><span class="p">,</span> <span class="mi">89822</span><span class="p">,</span> <span class="mi">57015</span><span class="p">);</span>
  <span class="n">i_price</span> <span class="o">|</span>         <span class="n">i_name</span>
<span class="c1">----------+--------------------------</span>
       <span class="mi">18</span> <span class="o">|</span> <span class="n">jeepiwbauliwssommaatpx</span>
       <span class="mi">18</span> <span class="o">|</span> <span class="n">obunnbtllietlfrzgadvsd</span>
       <span class="mi">10</span> <span class="o">|</span> <span class="n">xycrtthwkbhmbhgozvapiiy</span>
       <span class="mi">20</span> <span class="o">|</span> <span class="n">spyboiefrndgosga</span>
       <span class="mi">40</span> <span class="o">|</span> <span class="n">ogthbfvggkgcvfuxdqxrlcv</span>
       <span class="mi">19</span> <span class="o">|</span> <span class="n">jibiftmraebdryisas</span>
       <span class="mi">26</span> <span class="o">|</span> <span class="n">visnhoukbsgiwmxceaxdq</span>
<span class="p">(</span><span class="mi">7</span> <span class="k">rows</span><span class="p">)</span>

<span class="nb">Time</span><span class="p">:</span> <span class="mi">4</span><span class="n">ms</span>
<span class="n">NOTICE</span><span class="p">:</span> <span class="o">-</span><span class="mi">4</span><span class="p">.</span><span class="mi">8</span><span class="n">s</span><span class="p">:</span> <span class="k">using</span> <span class="n">use</span> <span class="k">of</span> <span class="n">follower</span> <span class="k">reads</span> <span class="n">requires</span> <span class="n">an</span> <span class="n">enterprise</span> <span class="n">license</span><span class="p">.</span> <span class="n">see</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">cockroachlabs</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">pricing</span><span class="o">?</span><span class="k">cluster</span><span class="o">=</span><span class="n">fd188292</span><span class="o">-</span><span class="n">d434</span><span class="o">-</span><span class="mi">4328</span><span class="o">-</span><span class="n">b4a7</span><span class="o">-</span><span class="n">f528d02621e1</span> <span class="k">for</span> <span class="n">details</span> <span class="k">on</span> <span class="n">how</span> <span class="k">to</span> <span class="n">enable</span> <span class="n">enterprise</span> <span class="n">features</span> <span class="k">from</span> <span class="k">current</span> <span class="k">statement</span> <span class="nb">time</span> <span class="k">instead</span>
<span class="n">NOTICE</span><span class="p">:</span> <span class="o">-</span><span class="mi">4</span><span class="p">.</span><span class="mi">8</span><span class="n">s</span><span class="p">:</span> <span class="k">using</span> <span class="n">use</span> <span class="k">of</span> <span class="n">follower</span> <span class="k">reads</span> <span class="n">requires</span> <span class="n">an</span> <span class="n">enterprise</span> <span class="n">license</span><span class="p">.</span> <span class="n">see</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">cockroachlabs</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">pricing</span><span class="o">?</span><span class="k">cluster</span><span class="o">=</span><span class="n">fd188292</span><span class="o">-</span><span class="n">d434</span><span class="o">-</span><span class="mi">4328</span><span class="o">-</span><span class="n">b4a7</span><span class="o">-</span><span class="n">f528d02621e1</span> <span class="k">for</span> <span class="n">details</span> <span class="k">on</span> <span class="n">how</span> <span class="k">to</span> <span class="n">enable</span> <span class="n">enterprise</span> <span class="n">features</span> <span class="k">from</span> <span class="k">current</span> <span class="k">statement</span> <span class="nb">time</span> <span class="k">instead</span>
<span class="n">total</span> <span class="p">(</span><span class="n">execution</span> <span class="mi">3</span><span class="n">ms</span> <span class="o">/</span> <span class="n">network</span> <span class="mi">0</span><span class="n">ms</span><span class="p">)</span>
</code></pre></div></div>

<h5 id="do-not-use-batch-select-">Do not use batch select !</h5>

<p>if using</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">item</span> <span class="k">where</span> <span class="n">i_id</span> <span class="k">in</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
</code></pre></div></div>

<p>the result will only have 2 records, and the sequence is not the same as (10,10,4), cause bugs.</p>

<p>if use batch select, should generate a map to map each query result to index.</p>

<h1 id="check-if-use-index">Check if use index</h1>

<h2 id="indexs">indexs</h2>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">warehouse</span> <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">W_ID</span><span class="p">)</span>
<span class="n">district</span> <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">D_W_ID</span><span class="p">,</span> <span class="n">D_ID</span><span class="p">)</span>
<span class="n">customer</span> <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">C_W_ID</span><span class="p">,</span> <span class="n">C_D_ID</span><span class="p">,</span> <span class="n">C_ID</span><span class="p">)</span>
<span class="n">order_ori</span> 
		<span class="k">INDEX</span> <span class="n">order_ori_joint_id</span> <span class="p">(</span><span class="n">o_w_id</span><span class="p">,</span> <span class="n">o_d_id</span><span class="p">,</span> <span class="n">o_id</span><span class="p">,</span> 								<span class="n">o_carrier_id</span><span class="p">),</span>
    <span class="k">INDEX</span> <span class="n">order_ori_joint_c_id</span> <span class="p">(</span><span class="n">o_w_id</span><span class="p">,</span> <span class="n">o_d_id</span><span class="p">,</span> <span class="n">o_c_id</span><span class="p">),</span>
    <span class="k">INDEX</span> <span class="n">order_ori_c_id</span> <span class="p">(</span><span class="n">o_c_id</span><span class="p">),</span>
    <span class="k">INDEX</span> <span class="n">order_ori_i_id</span> <span class="p">(</span><span class="n">o_id</span><span class="p">),</span>
    <span class="k">INDEX</span> <span class="n">order_ori_entry_d</span> <span class="p">(</span><span class="n">o_entry_d</span><span class="p">))</span>
<span class="n">order_line</span>  
		<span class="k">INDEX</span> <span class="n">order_line_joint_id</span> <span class="p">(</span><span class="n">ol_w_id</span><span class="p">,</span> <span class="n">ol_d_id</span><span class="p">,</span> <span class="n">ol_o_id</span><span class="p">,</span> 	         <span class="n">ol_number</span><span class="p">),</span>
    <span class="k">INDEX</span> <span class="n">order_line_i_id</span><span class="p">(</span><span class="n">ol_i_id</span><span class="p">),</span>
    <span class="k">INDEX</span> <span class="n">order_line_q</span><span class="p">(</span><span class="n">OL_QUANTITY</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="1payment_transaction">1.payment_transaction</h2>

<p>query:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">explain</span> <span class="k">UPDATE</span> <span class="n">warehouse</span> <span class="k">SET</span> <span class="n">W_YTD</span> <span class="o">=</span> <span class="n">W_YTD</span> <span class="o">+</span> <span class="mi">9213</span><span class="p">.</span><span class="mi">21</span> <span class="k">WHERE</span> <span class="n">W_ID</span> <span class="o">=</span> <span class="mi">10</span> <span class="n">RETURNING</span> <span class="n">W_STREET_1</span><span class="p">,</span> <span class="n">W_STREET_2</span><span class="p">,</span> <span class="n">W_CITY</span><span class="p">,</span>
<span class="n">W_STATE</span><span class="p">,</span> <span class="n">W_ZIP</span><span class="p">;</span>
                                         <span class="n">info</span>
<span class="c1">---------------------------------------------------------------------------------------</span>
  <span class="n">distribution</span><span class="p">:</span> <span class="k">local</span>
  <span class="n">vectorized</span><span class="p">:</span> <span class="k">true</span>

  <span class="err">•</span> <span class="k">update</span>
  <span class="err">│</span> <span class="n">estimated</span> <span class="k">row</span> <span class="k">count</span><span class="p">:</span> <span class="mi">1</span>
  <span class="err">│</span> <span class="k">table</span><span class="p">:</span> <span class="n">warehouse</span>
  <span class="err">│</span> <span class="k">set</span><span class="p">:</span> <span class="n">w_ytd</span>
  <span class="err">│</span> <span class="n">auto</span> <span class="k">commit</span>
  <span class="err">│</span>
  <span class="err">└──</span> <span class="err">•</span> <span class="n">render</span>
      <span class="err">│</span> <span class="n">estimated</span> <span class="k">row</span> <span class="k">count</span><span class="p">:</span> <span class="mi">1</span>
      <span class="err">│</span>
      <span class="err">└──</span> <span class="err">•</span> <span class="n">scan</span>
            <span class="n">estimated</span> <span class="k">row</span> <span class="k">count</span><span class="p">:</span> <span class="mi">1</span> <span class="p">(</span><span class="mi">10</span><span class="o">%</span> <span class="k">of</span> <span class="n">the</span> <span class="k">table</span><span class="p">;</span> <span class="n">stats</span> <span class="n">collected</span> <span class="mi">59</span> <span class="n">minutes</span> <span class="n">ago</span><span class="p">)</span>
            <span class="k">table</span><span class="p">:</span> <span class="n">warehouse</span><span class="o">@</span><span class="k">primary</span>
            <span class="n">spans</span><span class="p">:</span> <span class="p">[</span><span class="o">/</span><span class="mi">10</span> <span class="o">-</span> <span class="o">/</span><span class="mi">10</span><span class="p">]</span>
            <span class="n">locking</span> <span class="n">strength</span><span class="p">:</span> <span class="k">for</span> <span class="k">update</span>
<span class="p">(</span><span class="mi">17</span> <span class="k">rows</span><span class="p">)</span>

</code></pre></div></div>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">explain</span> <span class="k">UPDATE</span> <span class="n">district</span> <span class="k">SET</span> <span class="n">D_YTD</span> <span class="o">=</span> <span class="n">D_YTD</span> <span class="o">+</span> <span class="mi">9213</span><span class="p">.</span><span class="mi">21</span> <span class="k">WHERE</span> <span class="n">D_W_ID</span> <span class="o">=</span> <span class="mi">10</span> <span class="k">and</span> <span class="n">D_ID</span> <span class="o">=</span> <span class="mi">2</span> <span class="n">returning</span> <span class="n">D_STREET_1</span><span class="p">,</span> <span class="n">D_STREET_2</span><span class="p">,</span> <span class="n">D_CITY</span><span class="p">,</span> <span class="n">D_STATE</span><span class="p">,</span> <span class="n">D_ZIP</span><span class="p">;</span>
                                        <span class="n">info</span>
<span class="c1">------------------------------------------------------------------------------------</span>
  <span class="n">distribution</span><span class="p">:</span> <span class="k">local</span>
  <span class="n">vectorized</span><span class="p">:</span> <span class="k">true</span>

  <span class="err">•</span> <span class="k">update</span>
  <span class="err">│</span> <span class="n">estimated</span> <span class="k">row</span> <span class="k">count</span><span class="p">:</span> <span class="mi">1</span>
  <span class="err">│</span> <span class="k">table</span><span class="p">:</span> <span class="n">district</span>
  <span class="err">│</span> <span class="k">set</span><span class="p">:</span> <span class="n">d_ytd</span>
  <span class="err">│</span> <span class="n">auto</span> <span class="k">commit</span>
  <span class="err">│</span>
  <span class="err">└──</span> <span class="err">•</span> <span class="n">render</span>
      <span class="err">│</span> <span class="n">estimated</span> <span class="k">row</span> <span class="k">count</span><span class="p">:</span> <span class="mi">1</span>
      <span class="err">│</span>
      <span class="err">└──</span> <span class="err">•</span> <span class="n">scan</span>
            <span class="n">estimated</span> <span class="k">row</span> <span class="k">count</span><span class="p">:</span> <span class="mi">1</span> <span class="p">(</span><span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="o">%</span> <span class="k">of</span> <span class="n">the</span> <span class="k">table</span><span class="p">;</span> <span class="n">stats</span> <span class="n">collected</span> <span class="mi">1</span> <span class="n">hour</span> <span class="n">ago</span><span class="p">)</span>
            <span class="k">table</span><span class="p">:</span> <span class="n">district</span><span class="o">@</span><span class="k">primary</span>
            <span class="n">spans</span><span class="p">:</span> <span class="p">[</span><span class="o">/</span><span class="mi">10</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="o">/</span><span class="mi">10</span><span class="o">/</span><span class="mi">2</span><span class="p">]</span>
            <span class="n">locking</span> <span class="n">strength</span><span class="p">:</span> <span class="k">for</span> <span class="k">update</span>
<span class="p">(</span><span class="mi">17</span> <span class="k">rows</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">explain</span> <span class="k">UPDATE</span> <span class="n">customer</span> <span class="k">SET</span> <span class="n">C_BALANCE</span> <span class="o">=</span> <span class="n">C_BALANCE</span> <span class="o">-</span> <span class="mi">9213</span><span class="p">.</span><span class="mi">21</span><span class="p">,</span> <span class="n">C_YTD_PAYMENT</span> <span class="o">=</span> <span class="n">C_YTD_PAYMENT</span> <span class="o">+</span> <span class="mi">9213</span><span class="p">.</span><span class="mi">21</span><span class="p">,</span> <span class="n">C_PAYMENT_CNT</span> <span class="o">=</span> <span class="n">C_PAYMENT_CNT</span> <span class="o">+</span> <span class="mi">1</span> <span class="k">WHERE</span> <span class="n">C_W_ID</span> <span class="o">=</span> <span class="mi">10</span> <span class="k">and</span> <span class="n">C_D_ID</span> <span class="o">=</span> <span class="mi">2</span> <span class="k">and</span> <span class="n">C_ID</span> <span class="o">=</span> <span class="mi">2190</span> <span class="n">RETURNING</span> <span class="n">C_W_ID</span><span class="p">,</span> <span class="n">C_D_ID</span><span class="p">,</span> <span class="n">C_ID</span><span class="p">,</span> <span class="n">C_FIRST</span><span class="p">,</span> <span class="n">C_MIDDLE</span><span class="p">,</span> <span class="n">C_LAST</span><span class="p">,</span> <span class="n">C_STREET_1</span><span class="p">,</span> <span class="n">C_STREET_2</span><span class="p">,</span> <span class="n">C_CITY</span><span class="p">,</span> <span class="n">C_STATE</span><span class="p">,</span> <span class="n">C_ZIP</span><span class="p">,</span> <span class="n">C_PHONE</span><span class="p">,</span> <span class="n">C_SINCE</span><span class="p">,</span> <span class="n">C_CREDIT</span><span class="p">,</span> <span class="n">C_CREDIT_LIM</span><span class="p">,</span> <span class="n">C_DISCOUNT</span><span class="p">,</span> <span class="n">C_BALANCE</span><span class="p">;</span>
                                         <span class="n">info</span>
<span class="c1">--------------------------------------------------------------------------------------</span>
  <span class="n">distribution</span><span class="p">:</span> <span class="k">local</span>
  <span class="n">vectorized</span><span class="p">:</span> <span class="k">true</span>

  <span class="err">•</span> <span class="k">update</span>
  <span class="err">│</span> <span class="n">estimated</span> <span class="k">row</span> <span class="k">count</span><span class="p">:</span> <span class="mi">1</span>
  <span class="err">│</span> <span class="k">table</span><span class="p">:</span> <span class="n">customer</span>
  <span class="err">│</span> <span class="k">set</span><span class="p">:</span> <span class="n">c_balance</span><span class="p">,</span> <span class="n">c_ytd_payment</span><span class="p">,</span> <span class="n">c_payment_cnt</span>
  <span class="err">│</span> <span class="n">auto</span> <span class="k">commit</span>
  <span class="err">│</span>
  <span class="err">└──</span> <span class="err">•</span> <span class="n">render</span>
      <span class="err">│</span> <span class="n">estimated</span> <span class="k">row</span> <span class="k">count</span><span class="p">:</span> <span class="mi">1</span>
      <span class="err">│</span>
      <span class="err">└──</span> <span class="err">•</span> <span class="n">scan</span>
            <span class="n">estimated</span> <span class="k">row</span> <span class="k">count</span><span class="p">:</span> <span class="mi">1</span> <span class="p">(</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="o">%</span> <span class="k">of</span> <span class="n">the</span> <span class="k">table</span><span class="p">;</span> <span class="n">stats</span> <span class="n">collected</span> <span class="mi">1</span> <span class="n">hour</span> <span class="n">ago</span><span class="p">)</span>
            <span class="k">table</span><span class="p">:</span> <span class="n">customer</span><span class="o">@</span><span class="k">primary</span>
            <span class="n">spans</span><span class="p">:</span> <span class="p">[</span><span class="o">/</span><span class="mi">10</span><span class="o">/</span><span class="mi">2</span><span class="o">/</span><span class="mi">2190</span> <span class="o">-</span> <span class="o">/</span><span class="mi">10</span><span class="o">/</span><span class="mi">2</span><span class="o">/</span><span class="mi">2190</span><span class="p">]</span>
            <span class="n">locking</span> <span class="n">strength</span><span class="p">:</span> <span class="k">for</span> <span class="k">update</span>
</code></pre></div></div>

<h2 id="2-deliver_transaction">2. deliver_transaction</h2>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">explain</span> <span class="k">update</span> <span class="n">order_ori</span> <span class="k">set</span> <span class="n">o_carrier_id</span><span class="o">=</span><span class="mi">10</span> <span class="k">where</span> <span class="n">o_w_id</span><span class="o">=</span><span class="mi">8</span> <span class="k">and</span> <span class="n">o_d_id</span><span class="o">=</span><span class="mi">1</span> <span class="k">and</span> <span class="n">o_id</span><span class="o">=</span><span class="p">(</span><span class="k">select</span> <span class="k">MIN</span><span class="p">(</span><span class="n">o_id</span><span class="p">)</span> <span class="k">from</span> <span class="n">order_ori</span> <span class="k">where</span> <span class="n">o_w_id</span><span class="o">=</span><span class="mi">8</span> <span class="k">and</span> <span class="n">o_d_id</span><span class="o">=</span><span class="mi">1</span> <span class="k">and</span> <span class="n">o_carrier_id</span> <span class="k">is</span> <span class="k">null</span><span class="p">)</span>  <span class="n">returning</span> <span class="n">o_id</span><span class="p">,</span> <span class="n">o_c_id</span><span class="p">;</span>
                                                           <span class="n">info</span>
<span class="c1">--------------------------------------------------------------------------------------------------------------------------</span>
  <span class="n">distribution</span><span class="p">:</span> <span class="k">local</span>
  <span class="n">vectorized</span><span class="p">:</span> <span class="k">true</span>

  <span class="err">•</span> <span class="n">root</span>
  <span class="err">│</span>
  <span class="err">├──</span> <span class="err">•</span> <span class="k">update</span>
  <span class="err">│</span>   <span class="err">│</span> <span class="n">estimated</span> <span class="k">row</span> <span class="k">count</span><span class="p">:</span> <span class="mi">967</span>
  <span class="err">│</span>   <span class="err">│</span> <span class="k">table</span><span class="p">:</span> <span class="n">order_ori</span>
  <span class="err">│</span>   <span class="err">│</span> <span class="k">set</span><span class="p">:</span> <span class="n">o_carrier_id</span>
  <span class="err">│</span>   <span class="err">│</span> <span class="n">auto</span> <span class="k">commit</span>
  <span class="err">│</span>   <span class="err">│</span>
  <span class="err">│</span>   <span class="err">└──</span> <span class="err">•</span> <span class="n">render</span>
  <span class="err">│</span>       <span class="err">│</span> <span class="n">estimated</span> <span class="k">row</span> <span class="k">count</span><span class="p">:</span> <span class="mi">967</span>
  <span class="err">│</span>       <span class="err">│</span>
  <span class="err">│</span>       <span class="err">└──</span> <span class="err">•</span> <span class="k">index</span> <span class="k">join</span>
  <span class="err">│</span>           <span class="err">│</span> <span class="n">estimated</span> <span class="k">row</span> <span class="k">count</span><span class="p">:</span> <span class="mi">967</span>
  <span class="err">│</span>           <span class="err">│</span> <span class="k">table</span><span class="p">:</span> <span class="n">order_ori</span><span class="o">@</span><span class="k">primary</span>
  <span class="err">│</span>           <span class="err">│</span>
  <span class="err">│</span>           <span class="err">└──</span> <span class="err">•</span> <span class="n">filter</span>
  <span class="err">│</span>               <span class="err">│</span> <span class="n">estimated</span> <span class="k">row</span> <span class="k">count</span><span class="p">:</span> <span class="mi">967</span>
  <span class="err">│</span>               <span class="err">│</span> <span class="n">filter</span><span class="p">:</span> <span class="n">o_id</span> <span class="o">=</span> <span class="o">@</span><span class="n">S1</span>
  <span class="err">│</span>               <span class="err">│</span>
  <span class="err">│</span>               <span class="err">└──</span> <span class="err">•</span> <span class="n">scan</span>
  <span class="err">│</span>                     <span class="n">estimated</span> <span class="k">row</span> <span class="k">count</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span><span class="mi">902</span> <span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">97</span><span class="o">%</span> <span class="k">of</span> <span class="n">the</span> <span class="k">table</span><span class="p">;</span> <span class="n">stats</span> <span class="n">collected</span> <span class="mi">2</span> <span class="n">hours</span> <span class="n">ago</span><span class="p">)</span>
  <span class="err">│</span>                     <span class="k">table</span><span class="p">:</span> <span class="n">order_ori</span><span class="o">@</span><span class="n">order_ori_joint_id</span>
  <span class="err">│</span>                     <span class="n">spans</span><span class="p">:</span> <span class="p">[</span><span class="o">/</span><span class="mi">8</span><span class="o">/</span><span class="mi">1</span> <span class="o">-</span> <span class="o">/</span><span class="mi">8</span><span class="o">/</span><span class="mi">1</span><span class="p">]</span>
  <span class="err">│</span>
  <span class="err">└──</span> <span class="err">•</span> <span class="n">subquery</span>
      <span class="err">│</span> <span class="n">id</span><span class="p">:</span> <span class="o">@</span><span class="n">S1</span>
      <span class="err">│</span> <span class="n">original</span> <span class="k">sql</span><span class="p">:</span> <span class="p">(</span><span class="k">SELECT</span> <span class="k">min</span><span class="p">(</span><span class="n">o_id</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">order_ori</span> <span class="k">WHERE</span> <span class="p">((</span><span class="n">o_w_id</span> <span class="o">=</span> <span class="mi">8</span><span class="p">)</span> <span class="k">AND</span> <span class="p">(</span><span class="n">o_d_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">))</span> <span class="k">AND</span> <span class="p">(</span><span class="n">o_carrier_id</span> <span class="k">IS</span> <span class="k">NULL</span><span class="p">))</span>
      <span class="err">│</span> <span class="k">exec</span> <span class="k">mode</span><span class="p">:</span> <span class="n">one</span> <span class="k">row</span>
      <span class="err">│</span>
      <span class="err">└──</span> <span class="err">•</span> <span class="k">group</span> <span class="p">(</span><span class="n">scalar</span><span class="p">)</span>
          <span class="err">│</span> <span class="n">estimated</span> <span class="k">row</span> <span class="k">count</span><span class="p">:</span> <span class="mi">1</span>
          <span class="err">│</span>
          <span class="err">└──</span> <span class="err">•</span> <span class="k">limit</span>
              <span class="err">│</span> <span class="n">estimated</span> <span class="k">row</span> <span class="k">count</span><span class="p">:</span> <span class="mi">1</span>
              <span class="err">│</span> <span class="k">count</span><span class="p">:</span> <span class="mi">1</span>
              <span class="err">│</span>
              <span class="err">└──</span> <span class="err">•</span> <span class="n">filter</span>
                  <span class="err">│</span> <span class="n">estimated</span> <span class="k">row</span> <span class="k">count</span><span class="p">:</span> <span class="mi">552</span>
                  <span class="err">│</span> <span class="n">filter</span><span class="p">:</span> <span class="n">o_carrier_id</span> <span class="k">IS</span> <span class="k">NULL</span>
                  <span class="err">│</span>
                  <span class="err">└──</span> <span class="err">•</span> <span class="n">scan</span>
                        <span class="n">estimated</span> <span class="k">row</span> <span class="k">count</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span><span class="mi">902</span> <span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">97</span><span class="o">%</span> <span class="k">of</span> <span class="n">the</span> <span class="k">table</span><span class="p">;</span> <span class="n">stats</span> <span class="n">collected</span> <span class="mi">2</span> <span class="n">hours</span> <span class="n">ago</span><span class="p">)</span>
                        <span class="k">table</span><span class="p">:</span> <span class="n">order_ori</span><span class="o">@</span><span class="n">order_ori_joint_id</span>
                        <span class="n">spans</span><span class="p">:</span> <span class="p">[</span><span class="o">/</span><span class="mi">8</span><span class="o">/</span><span class="mi">1</span> <span class="o">-</span> <span class="o">/</span><span class="mi">8</span><span class="o">/</span><span class="mi">1</span><span class="p">]</span>
</code></pre></div></div>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">explain</span> <span class="k">update</span> <span class="n">order_line</span> <span class="k">set</span> <span class="n">OL_DELIVERY_D</span> <span class="o">=</span><span class="n">now</span><span class="p">()</span> <span class="k">where</span> <span class="n">ol_w_id</span><span class="o">=</span><span class="mi">8</span> <span class="k">and</span> <span class="n">ol_d_id</span><span class="o">=</span><span class="mi">1</span> <span class="k">and</span> <span class="n">ol_o_id</span><span class="o">=</span><span class="mi">2124</span><span class="p">;</span>
                                            <span class="n">info</span>
<span class="c1">--------------------------------------------------------------------------------------------</span>
  <span class="n">distribution</span><span class="p">:</span> <span class="k">local</span>
  <span class="n">vectorized</span><span class="p">:</span> <span class="k">true</span>

  <span class="err">•</span> <span class="k">update</span>
  <span class="err">│</span> <span class="k">table</span><span class="p">:</span> <span class="n">order_line</span>
  <span class="err">│</span> <span class="k">set</span><span class="p">:</span> <span class="n">ol_delivery_d</span>
  <span class="err">│</span> <span class="n">auto</span> <span class="k">commit</span>
  <span class="err">│</span>
  <span class="err">└──</span> <span class="err">•</span> <span class="n">render</span>
      <span class="err">│</span> <span class="n">estimated</span> <span class="k">row</span> <span class="k">count</span><span class="p">:</span> <span class="mi">11</span>
      <span class="err">│</span>
      <span class="err">└──</span> <span class="err">•</span> <span class="k">index</span> <span class="k">join</span>
          <span class="err">│</span> <span class="n">estimated</span> <span class="k">row</span> <span class="k">count</span><span class="p">:</span> <span class="mi">11</span>
          <span class="err">│</span> <span class="k">table</span><span class="p">:</span> <span class="n">order_line</span><span class="o">@</span><span class="k">primary</span>
          <span class="err">│</span>
          <span class="err">└──</span> <span class="err">•</span> <span class="n">scan</span>
                <span class="n">estimated</span> <span class="k">row</span> <span class="k">count</span><span class="p">:</span> <span class="mi">11</span> <span class="p">(</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="o">%</span> <span class="k">of</span> <span class="n">the</span> <span class="k">table</span><span class="p">;</span> <span class="n">stats</span> <span class="n">collected</span> <span class="mi">2</span> <span class="n">hours</span> <span class="n">ago</span><span class="p">)</span>
                <span class="k">table</span><span class="p">:</span> <span class="n">order_line</span><span class="o">@</span><span class="n">order_line_joint_id</span>
                <span class="n">spans</span><span class="p">:</span> <span class="p">[</span><span class="o">/</span><span class="mi">8</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mi">2124</span> <span class="o">-</span> <span class="o">/</span><span class="mi">8</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mi">2124</span><span class="p">]</span>
                <span class="n">locking</span> <span class="n">strength</span><span class="p">:</span> <span class="k">for</span> <span class="k">update</span>
</code></pre></div></div>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">update</span> <span class="n">customer</span> <span class="k">set</span> <span class="p">(</span><span class="n">C_BALANCE</span><span class="p">,</span> <span class="n">C_DELIVERY_CNT</span><span class="p">)</span> <span class="o">=</span> <span class="p">((</span><span class="k">select</span> <span class="k">sum</span><span class="p">(</span><span class="n">ol_amount</span><span class="p">)</span> <span class="k">from</span> <span class="n">order_line</span>    <span class="k">where</span> <span class="p">(</span><span class="n">ol_w_id</span><span class="p">,</span> <span class="n">ol_d_id</span><span class="p">,</span> <span class="n">ol_o_id</span><span class="p">)</span> <span class="k">in</span> <span class="p">((</span><span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2124</span><span class="p">))</span> <span class="k">group</span> <span class="k">by</span> <span class="n">ol_o_id</span><span class="p">),</span> <span class="n">C_DELIVERY_CNT</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>    <span class="k">where</span> <span class="p">(</span><span class="n">c_w_id</span><span class="p">,</span> <span class="n">c_d_id</span><span class="p">,</span> <span class="n">c_id</span><span class="p">)</span> <span class="k">in</span> <span class="p">((</span><span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2908</span><span class="p">));</span>
                                                                <span class="n">info</span>
<span class="c1">-------------------------------------------------------------------------------------------------------------------------------------</span>
  <span class="n">distribution</span><span class="p">:</span> <span class="k">local</span>
  <span class="n">vectorized</span><span class="p">:</span> <span class="k">true</span>

  <span class="err">•</span> <span class="n">root</span>
  <span class="err">│</span>
  <span class="err">├──</span> <span class="err">•</span> <span class="k">update</span>
  <span class="err">│</span>   <span class="err">│</span> <span class="k">table</span><span class="p">:</span> <span class="n">customer</span>
  <span class="err">│</span>   <span class="err">│</span> <span class="k">set</span><span class="p">:</span> <span class="n">c_balance</span><span class="p">,</span> <span class="n">c_delivery_cnt</span>
  <span class="err">│</span>   <span class="err">│</span> <span class="n">auto</span> <span class="k">commit</span>
  <span class="err">│</span>   <span class="err">│</span>
  <span class="err">│</span>   <span class="err">└──</span> <span class="err">•</span> <span class="n">render</span>
  <span class="err">│</span>       <span class="err">│</span> <span class="n">estimated</span> <span class="k">row</span> <span class="k">count</span><span class="p">:</span> <span class="mi">1</span>
  <span class="err">│</span>       <span class="err">│</span>
  <span class="err">│</span>       <span class="err">└──</span> <span class="err">•</span> <span class="n">scan</span>
  <span class="err">│</span>             <span class="n">estimated</span> <span class="k">row</span> <span class="k">count</span><span class="p">:</span> <span class="mi">1</span> <span class="p">(</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="o">%</span> <span class="k">of</span> <span class="n">the</span> <span class="k">table</span><span class="p">;</span> <span class="n">stats</span> <span class="n">collected</span> <span class="mi">14</span> <span class="n">minutes</span> <span class="n">ago</span><span class="p">)</span>
  <span class="err">│</span>             <span class="k">table</span><span class="p">:</span> <span class="n">customer</span><span class="o">@</span><span class="k">primary</span>
  <span class="err">│</span>             <span class="n">spans</span><span class="p">:</span> <span class="p">[</span><span class="o">/</span><span class="mi">8</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mi">2908</span> <span class="o">-</span> <span class="o">/</span><span class="mi">8</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mi">2908</span><span class="p">]</span>
  <span class="err">│</span>             <span class="n">locking</span> <span class="n">strength</span><span class="p">:</span> <span class="k">for</span> <span class="k">update</span>
  <span class="err">│</span>
  <span class="err">└──</span> <span class="err">•</span> <span class="n">subquery</span>
      <span class="err">│</span> <span class="n">id</span><span class="p">:</span> <span class="o">@</span><span class="n">S1</span>
      <span class="err">│</span> <span class="n">original</span> <span class="k">sql</span><span class="p">:</span> <span class="p">(</span><span class="k">SELECT</span> <span class="k">sum</span><span class="p">(</span><span class="n">ol_amount</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">order_line</span> <span class="k">WHERE</span> <span class="p">(</span><span class="n">ol_w_id</span><span class="p">,</span> <span class="n">ol_d_id</span><span class="p">,</span> <span class="n">ol_o_id</span><span class="p">)</span> <span class="k">IN</span> <span class="p">((</span><span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2124</span><span class="p">),)</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">ol_o_id</span><span class="p">)</span>
      <span class="err">│</span> <span class="k">exec</span> <span class="k">mode</span><span class="p">:</span> <span class="n">one</span> <span class="k">row</span>
      <span class="err">│</span>
      <span class="err">└──</span> <span class="err">•</span> <span class="k">group</span>
          <span class="err">│</span> <span class="n">estimated</span> <span class="k">row</span> <span class="k">count</span><span class="p">:</span> <span class="mi">1</span>
          <span class="err">│</span>
          <span class="err">└──</span> <span class="err">•</span> <span class="k">index</span> <span class="k">join</span>
              <span class="err">│</span> <span class="n">estimated</span> <span class="k">row</span> <span class="k">count</span><span class="p">:</span> <span class="mi">11</span>
              <span class="err">│</span> <span class="k">table</span><span class="p">:</span> <span class="n">order_line</span><span class="o">@</span><span class="k">primary</span>
              <span class="err">│</span>
              <span class="err">└──</span> <span class="err">•</span> <span class="n">scan</span>
                    <span class="n">estimated</span> <span class="k">row</span> <span class="k">count</span><span class="p">:</span> <span class="mi">11</span> <span class="p">(</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="o">%</span> <span class="k">of</span> <span class="n">the</span> <span class="k">table</span><span class="p">;</span> <span class="n">stats</span> <span class="n">collected</span> <span class="mi">2</span> <span class="n">hours</span> <span class="n">ago</span><span class="p">)</span>
                    <span class="k">table</span><span class="p">:</span> <span class="n">order_line</span><span class="o">@</span><span class="n">order_line_joint_id</span>
                    <span class="n">spans</span><span class="p">:</span> <span class="p">[</span><span class="o">/</span><span class="mi">8</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mi">2124</span> <span class="o">-</span> <span class="o">/</span><span class="mi">8</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mi">2124</span><span class="p">]</span>
                    <span class="n">locking</span> <span class="n">strength</span><span class="p">:</span> <span class="k">for</span> <span class="k">update</span>
</code></pre></div></div>

<h1 id="local-experiments-result-compare">Local Experiments result compare</h1>

<p><strong>In experiment, each clinet run 510 tx</strong></p>

<h2 id="time-used-1-driver">Time used 1 driver</h2>

<h3 id="delivertx--read-update-many_update-398">deliverTx:  read-update-(many_update) 398</h3>

<p>Read history data</p>

<p>update order_ori, and order_line</p>

<p>for loop:</p>

<p>​	update one customer per tx</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">required_tx_types</span> <span class="k">is</span><span class="p">:</span>
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">108</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">34</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">23</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">205</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">14</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">103</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">19</span><span class="p">}</span>
<span class="n">succeed_tx_types</span> <span class="k">is</span><span class="p">:</span>
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">108</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">34</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">23</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">205</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">14</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">103</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">19</span><span class="p">}</span>
<span class="n">tx_time_range</span> <span class="p">[</span><span class="k">min</span><span class="o">-</span><span class="k">max</span><span class="p">]</span> <span class="k">is</span> <span class="p">:</span>
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> 
			<span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">15614604949951172</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">6048641204833984</span><span class="p">],</span> 
<span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> 
			<span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">002360105514526367</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">004561901092529297</span><span class="p">],</span> 
<span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">5</span><span class="p">.</span><span class="mi">525400161743164</span><span class="p">,</span> <span class="mi">7</span><span class="p">.</span><span class="mi">103399991989136</span><span class="p">],</span> 
<span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">03463602066040039</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">19315600395202637</span><span class="p">],</span> 
<span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">13823390007019043</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">7757470607757568</span><span class="p">],</span> 
<span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">006901979446411133</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">012250185012817383</span><span class="p">],</span> 
<span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">.</span><span class="mi">6580579280853271</span><span class="p">,</span> <span class="mi">3</span><span class="p">.</span><span class="mi">323481798171997</span><span class="p">],</span> 
<span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">04493594169616699</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">09347701072692871</span><span class="p">]}</span>
<span class="n">tx_time</span> <span class="n">middle</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span>
  <span class="p">{</span>
<span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">24093103408813477</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0033600330352783203</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">6</span><span class="p">.</span><span class="mi">219896078109741</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0728006362915039</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3145883083343506</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">009333610534667969</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">2</span><span class="p">.</span><span class="mi">6304752826690674</span><span class="p">,</span> 
<span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">07317614555358887</span><span class="p">}</span>
<span class="n">tx_time</span> <span class="n">average</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span>
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">2541446222199334</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">003398467512691722</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">6</span><span class="p">.</span><span class="mi">279269456863403</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">08421063423156738</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3346138628517709</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">009504692895071847</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">2</span><span class="p">.</span><span class="mi">5965065979263158</span><span class="p">,</span> 
<span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">07145408580177709</span><span class="p">}</span>
<span class="n">tx</span> <span class="nb">time</span> <span class="n">percentage</span> <span class="k">is</span> <span class="p">:</span>
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'6.883%'</span><span class="p">,</span> 
<span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'0.028%'</span><span class="p">,</span> 
<span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'7.873%'</span><span class="p">,</span> 
<span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'0.485%'</span><span class="p">,</span> 
<span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'17.20%'</span><span class="p">,</span> 
<span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'0.033%'</span><span class="p">,</span> 
<span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'67.06%'</span><span class="p">,</span> 
<span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'0.340%'</span><span class="p">}</span>

<span class="n">total</span> <span class="mi">398</span><span class="p">.</span><span class="mi">7506670951843</span> <span class="k">second</span>
</code></pre></div></div>

<h3 id="delivertx--one-tx-for-all-192">deliverTx:  one tx for all 192</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">required_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">108</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">34</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">23</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">205</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">14</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">103</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">19</span><span class="p">}</span>
<span class="n">succeed_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">108</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">34</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">23</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">205</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">14</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">103</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">19</span><span class="p">}</span>
<span class="n">tx_time_range</span> <span class="p">[</span><span class="k">min</span><span class="o">-</span><span class="k">max</span><span class="p">]</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> 
<span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">10168194770812988</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">6656451225280762</span><span class="p">],</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> 
<span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">0022268295288085938</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">006327152252197266</span><span class="p">],</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> 
<span class="p">[</span><span class="mi">4</span><span class="p">.</span><span class="mi">946579933166504</span><span class="p">,</span> <span class="mi">6</span><span class="p">.</span><span class="mi">067049980163574</span><span class="p">],</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> 
<span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">03118300437927246</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">18277788162231445</span><span class="p">],</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> 
<span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">11868524551391602</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">7066841125488281</span><span class="p">],</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> 
<span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">006595134735107422</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">011111974716186523</span><span class="p">],</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> 
<span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">37049388885498047</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">8880870342254639</span><span class="p">],</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> 
<span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">032930850982666016</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">08878898620605469</span><span class="p">]}</span>
<span class="n">tx_time</span> <span class="n">middle</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">25545787811279297</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">003216981887817383</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">5</span><span class="p">.</span><span class="mi">915307998657227</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0698099136352539</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">33884310722351074</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">007817983627319336</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5870859622955322</span><span class="p">,</span> 
<span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">06890702247619629</span><span class="p">}</span>
<span class="n">tx_time</span> <span class="n">average</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">2651287140669646</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">003412001273211311</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">5</span><span class="p">.</span><span class="mi">683387374877929</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">08120476681253185</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3451410630854165</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">008171371051243373</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5954574080346857</span><span class="p">,</span> 
<span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">06564034913715563</span><span class="p">}</span>
<span class="n">tx</span> <span class="nb">time</span> <span class="n">percentage</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'14.85%'</span><span class="p">,</span> 
<span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'0.060%'</span><span class="p">,</span> 
<span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'14.74%'</span><span class="p">,</span> 
<span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'0.968%'</span><span class="p">,</span> 
<span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'36.70%'</span><span class="p">,</span> 
<span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'0.059%'</span><span class="p">,</span> 
<span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'31.81%'</span><span class="p">,</span> 
<span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'0.646%'</span><span class="p">}</span>
<span class="n">total</span> <span class="nb">time</span> <span class="n">used</span><span class="p">:</span> <span class="mi">192</span><span class="p">.</span><span class="mi">78175592422485</span> <span class="k">second</span>
</code></pre></div></div>

<h3 id="delivertx--update-district-by-district-424">deliverTx:  update district by district 424</h3>

<p>each time update one district</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">required_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">108</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">34</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">23</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">205</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">14</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">103</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">19</span><span class="p">}</span>
<span class="n">succeed_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">108</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">34</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">23</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">205</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">14</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">103</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">19</span><span class="p">}</span>
<span class="n">tx</span> <span class="n">num</span> <span class="n">percentages</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'21.13%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'6.653%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'0.978%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'4.500%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'40.11%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'2.739%'</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'20.15%'</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'3.718%'</span><span class="p">}</span>
<span class="n">tx_time_range</span> <span class="p">[</span><span class="k">min</span><span class="o">-</span><span class="k">max</span><span class="p">]</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> 
<span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">1638801097869873</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">4351170063018799</span><span class="p">],</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> 
<span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">0026769638061523438</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">00970768928527832</span><span class="p">],</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> 
<span class="p">[</span><span class="mi">4</span><span class="p">.</span><span class="mi">792587757110596</span><span class="p">,</span> <span class="mi">6</span><span class="p">.</span><span class="mi">299859046936035</span><span class="p">],</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> 
<span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">027029752731323242</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1608259677886963</span><span class="p">],</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> 
<span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">18164706230163574</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">791996955871582</span><span class="p">],</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> 
<span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">007290840148925781</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">01192331314086914</span><span class="p">],</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> 
<span class="p">[</span><span class="mi">2</span><span class="p">.</span><span class="mi">504626512527466</span><span class="p">,</span> <span class="mi">3</span><span class="p">.</span><span class="mi">3145275115966797</span><span class="p">],</span> 
<span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">04175901412963867</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">09454107284545898</span><span class="p">]}</span>
<span class="n">tx_time</span> <span class="n">middle</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">2405691146850586</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">00413203239440918</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">5</span><span class="p">.</span><span class="mi">931691884994507</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">08571791648864746</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">33698415756225586</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">008859872817993164</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">2</span><span class="p">.</span><span class="mi">8518528938293457</span><span class="p">,</span> 
<span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">06686806678771973</span><span class="p">}</span>
<span class="n">tx_time</span> <span class="n">average</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">25068436949341383</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0041195084066951975</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">5</span><span class="p">.</span><span class="mi">719853401184082</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">09208858531454335</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3448722804464945</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">009128195898873466</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">2</span><span class="p">.</span><span class="mi">8540968640336715</span><span class="p">,</span> 
<span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">06967170614945262</span><span class="p">}</span>
<span class="n">tx</span> <span class="nb">time</span> <span class="n">percentage</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'6.380%'</span><span class="p">,</span> 
<span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'0.033%'</span><span class="p">,</span>
<span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'6.739%'</span><span class="p">,</span>
<span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'0.499%'</span><span class="p">,</span>
<span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'16.66%'</span><span class="p">,</span> 
<span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'0.030%'</span><span class="p">,</span> 
<span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'69.27%'</span><span class="p">,</span> 
<span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'0.311%'</span><span class="p">}</span>

<span class="n">total</span> <span class="nb">time</span> <span class="n">used</span><span class="p">:</span> <span class="mi">424</span><span class="p">.</span><span class="mi">33997893333435</span> <span class="k">second</span>
</code></pre></div></div>

<h3 id="delivertx--read-update_without_lock-187">deliverTx:  read-update_without_lock 187</h3>

<p>Read history data</p>

<p>Update all once, but without “select…for update”</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">required_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">108</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">34</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">23</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">205</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">14</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">103</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">19</span><span class="p">}</span>
<span class="n">succeed_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">108</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">34</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">23</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">205</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">14</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">103</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">19</span><span class="p">}</span>
<span class="n">tx</span> <span class="n">num</span> <span class="n">percentages</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'21.13%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'6.653%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'0.978%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'4.500%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'40.11%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'2.739%'</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'20.15%'</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'3.718%'</span><span class="p">}</span>
<span class="n">tx_time_range</span> <span class="p">[</span><span class="k">min</span><span class="o">-</span><span class="k">max</span><span class="p">]</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> 
<span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">14400196075439453</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">48920273780822754</span><span class="p">],</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> 
<span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">002496004104614258</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0046498775482177734</span><span class="p">],</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> 
<span class="p">[</span><span class="mi">4</span><span class="p">.</span><span class="mi">9215099811553955</span><span class="p">,</span> <span class="mi">9</span><span class="p">.</span><span class="mi">249538898468018</span><span class="p">],</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> 
<span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">02874588966369629</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">20659780502319336</span><span class="p">],</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> 
<span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">20825886726379395</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">666205883026123</span><span class="p">],</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> 
<span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">0068798065185546875</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">03983473777770996</span><span class="p">],</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> 
<span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">2555239200592041</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">8404970169067383</span><span class="p">],</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> 
<span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">05224180221557617</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1262359619140625</span><span class="p">]}</span>
<span class="n">tx_time</span> <span class="n">middle</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">2535707950592041</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0034859180450439453</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">5</span><span class="p">.</span><span class="mi">377862215042114</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">11979866027832031</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">34845900535583496</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">009082794189453125</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">496798038482666</span><span class="p">,</span> 
<span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">07172989845275879</span><span class="p">}</span>
<span class="n">tx_time</span> <span class="n">average</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">2582965824339125</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">003438837387982537</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">6</span><span class="p">.</span><span class="mi">197563028335571</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1170436195705248</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3538451148242485</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">012149214744567871</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5005713203578319</span><span class="p">,</span> 
<span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">07649445533752441</span><span class="p">}</span>
<span class="n">tx</span> <span class="nb">time</span> <span class="n">percentage</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'14.85%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'0.062%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'16.50%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'1.433%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'38.63%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'0.090%'</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'27.46%'</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'0.774%'</span><span class="p">}</span>

<span class="n">total</span> <span class="nb">time</span> <span class="n">used</span><span class="p">:</span> <span class="mi">187</span><span class="p">.</span><span class="mi">74753832817078</span> <span class="k">second</span>
</code></pre></div></div>

<h3 id="delivertx--read-update_with_lock-179">deliverTx:  read-update_with_lock 179</h3>

<p>Read history data</p>

<p>Update all once, but with “select…for update”</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">108</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">34</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">23</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">205</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">14</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">103</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">19</span><span class="p">}</span>
<span class="n">succeed_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">108</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">34</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">23</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">205</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">14</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">103</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">19</span><span class="p">}</span>
<span class="n">tx</span> <span class="n">num</span> <span class="n">percentages</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'21.13%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'6.653%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'0.978%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'4.500%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'40.11%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'2.739%'</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'20.15%'</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'3.718%'</span><span class="p">}</span>
<span class="n">tx_time_range</span> <span class="p">[</span><span class="k">min</span><span class="o">-</span><span class="k">max</span><span class="p">]</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">16335010528564453</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5330650806427002</span><span class="p">],</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">002318859100341797</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">00529026985168457</span><span class="p">],</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">5</span><span class="p">.</span><span class="mi">506866931915283</span><span class="p">,</span> <span class="mi">7</span><span class="p">.</span><span class="mi">278794050216675</span><span class="p">],</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">03537487983703613</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">20850610733032227</span><span class="p">],</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">19753527641296387</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">7181658744812012</span><span class="p">],</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">006493091583251953</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">009817123413085938</span><span class="p">],</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">19803285598754883</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">7750327587127686</span><span class="p">],</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">044051170349121094</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">12542390823364258</span><span class="p">]}</span>
<span class="n">tx_time</span> <span class="n">middle</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">24466919898986816</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">003422260284423828</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">5</span><span class="p">.</span><span class="mi">9502809047698975</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">10446000099182129</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">316270112991333</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">008033990859985352</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">43521714210510254</span><span class="p">,</span> 
<span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">06883907318115234</span><span class="p">}</span>
<span class="n">tx_time</span> <span class="n">average</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">2591760070235641</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">003440604490392348</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">6</span><span class="p">.</span><span class="mi">153213548660278</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">10385775566101074</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">34315277657857757</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">008057730538504464</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">44697901114676764</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">07225551103290759</span><span class="p">}</span>
<span class="n">tx</span> <span class="nb">time</span> <span class="n">percentage</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'15.60%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'0.065%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'17.14%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'1.331%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'39.21%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'0.062%'</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'25.66%'</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'0.765%'</span><span class="p">}</span>
<span class="n">total</span> <span class="nb">time</span> <span class="n">used</span><span class="p">:</span> <span class="mi">179</span><span class="p">.</span><span class="mi">40479707717896</span> <span class="k">second</span>
</code></pre></div></div>

<h3 id="delivertx--read-update-one_update-193">deliverTx:  read-update-(one_update) 193</h3>

<p>Read history data</p>

<p>update order_ori, and order_line</p>

<p>update all customer in one tx, before updating, use select…for update</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="n">required_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">108</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">34</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">23</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">205</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">14</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">103</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">19</span><span class="p">}</span>
 <span class="n">succeed_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">108</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">34</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">23</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">205</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">14</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">103</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">19</span><span class="p">}</span>
 <span class="n">tx</span> <span class="n">num</span> <span class="n">percentages</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'21.13%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'6.653%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'0.978%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'4.500%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'40.11%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'2.739%'</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'20.15%'</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'3.718%'</span><span class="p">}</span>
 <span class="n">tx_time_range</span> <span class="p">[</span><span class="k">min</span><span class="o">-</span><span class="k">max</span><span class="p">]</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">1447598934173584</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">537243127822876</span><span class="p">],</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">0023381710052490234</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">005206108093261719</span><span class="p">],</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">5</span><span class="p">.</span><span class="mi">607486009597778</span><span class="p">,</span> <span class="mi">7</span><span class="p">.</span><span class="mi">530024766921997</span><span class="p">],</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">03358817100524902</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1651158332824707</span><span class="p">],</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">1485579013824463</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">7553520202636719</span><span class="p">],</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">006378889083862305</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">010545015335083008</span><span class="p">],</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">3908543586730957</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">8421680927276611</span><span class="p">],</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">042954206466674805</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0917959213256836</span><span class="p">]}</span>
 <span class="n">tx_time</span> <span class="n">middle</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">2537400722503662</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0033087730407714844</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">5</span><span class="p">.</span><span class="mi">842335939407349</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">09751582145690918</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3116159439086914</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">008274078369140625</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5995280742645264</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">06537699699401855</span><span class="p">}</span>
 <span class="n">tx_time</span> <span class="n">average</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">258017968248438</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0033919460633221794</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">6</span><span class="p">.</span><span class="mi">176443719863892</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">09006326094917629</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3300563474980796</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">008453130722045898</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">6105537159928998</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">06746746364392732</span><span class="p">}</span>
 <span class="n">tx</span> <span class="nb">time</span> <span class="n">percentage</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'14.42%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'0.059%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'15.98%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'1.072%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'35.02%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'0.061%'</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'32.55%'</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'0.663%'</span><span class="p">}</span>

<span class="n">total</span> <span class="nb">time</span> <span class="n">used</span><span class="p">:</span> <span class="mi">193</span><span class="p">.</span><span class="mi">15439701080322</span> <span class="k">second</span>
</code></pre></div></div>

<h2 id="time-used-40-driver">Time used 40 driver</h2>

<h3 id="delivertx--read-update-many_update">deliverTx:  read-update-(many_update)</h3>

<p>Read history data</p>

<p>update order_ori, and order_line</p>

<p>for loop:</p>

<p>​	update one customer per tx</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code></code></pre></div></div>

<h3 id="delivertx--one-tx-for-all-retry-errored">deliverTx:  one tx for all (retry errored)</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">too</span> <span class="n">man</span> <span class="n">error</span><span class="p">,</span> <span class="n">cannot</span> <span class="n">use</span>
</code></pre></div></div>

<h3 id="delivertx--read-update_without_lockerror-and-slow">deliverTx:  read-update_without_lock(error and slow)</h3>

<p>Instead, “select from customer for update” in payment tx,</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">PaymentTxParams</span> <span class="n">WriteTooOldError</span><span class="p">,</span> <span class="n">cannot</span> <span class="n">use</span>
</code></pre></div></div>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">required_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">179</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">116</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">22</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">19</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">106</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">38</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">22</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">9</span><span class="p">}</span>
<span class="n">succeed_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">179</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">116</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">22</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">19</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">106</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">38</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">22</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">9</span><span class="p">}</span>
<span class="n">tx</span> <span class="n">num</span> <span class="n">percentages</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'35.02%'</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'22.70%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'4.305%'</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'3.718%'</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'20.74%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'7.436%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'4.305%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'1.761%'</span><span class="p">}</span>
<span class="n">tx_time_range</span> <span class="p">[</span><span class="k">min</span><span class="o">-</span><span class="k">max</span><span class="p">]</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">4197108745574951</span><span class="p">,</span> <span class="mi">5</span><span class="p">.</span><span class="mi">957425117492676</span><span class="p">],</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">055316925048828125</span><span class="p">,</span> <span class="mi">6</span><span class="p">.</span><span class="mi">418521881103516</span><span class="p">],</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">06302809715270996</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5879759788513184</span><span class="p">],</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">14858794212341309</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">8847870826721191</span><span class="p">],</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> 
<span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">3015890121459961</span><span class="p">,</span> <span class="mi">20</span><span class="p">.</span><span class="mi">024715185165405</span><span class="p">],</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> 
<span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">00344085693359375</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">10422205924987793</span><span class="p">],</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> 
<span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">018672704696655273</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1686418056488037</span><span class="p">],</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> 
<span class="p">[</span><span class="mi">35</span><span class="p">.</span><span class="mi">34037184715271</span><span class="p">,</span> <span class="mi">58</span><span class="p">.</span><span class="mi">69182014465332</span><span class="p">]}</span>
<span class="n">tx_time</span> <span class="n">middle</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">8999888896942139</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">35730886459350586</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">2606949806213379</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">615419864654541</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5908610820770264</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">01160883903503418</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">04464316368103027</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">40</span><span class="p">.</span><span class="mi">61507296562195</span><span class="p">}</span>
<span class="n">tx_time</span> <span class="n">average</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">1</span><span class="p">.</span><span class="mi">360372737799277</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">9666720094351933</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">28935195099223743</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">720273030431647</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">9975810410841456</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">01786107766000848</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">05126926031979648</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">42</span><span class="p">.</span><span class="mi">653216203053795</span><span class="p">}</span>
<span class="n">tx</span> <span class="nb">time</span> <span class="n">percentage</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'23.78%'</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'10.95%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'0.621%'</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'1.336%'</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'10.32%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'0.066%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'0.110%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'37.49%'</span><span class="p">}</span>

 <span class="n">total</span> <span class="nb">time</span> <span class="n">used</span><span class="p">:</span> <span class="mi">1023</span><span class="p">.</span><span class="mi">7773869037628</span> <span class="k">second</span>
</code></pre></div></div>

<h3 id="delivertx--read-update_with_lock-retry-errored">deliverTx:  read-update_with_lock (retry errored)</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">too</span> <span class="n">man</span> <span class="n">deliverTx</span> <span class="n">WriteTooOldError</span><span class="p">,</span> <span class="n">cannot</span> <span class="n">use</span>
</code></pre></div></div>

<h3 id="delivertx--read-update-one_update-with_lockslow">deliverTx:  read-update-(one_update) with_lock(slow)</h3>

<p>has select for update for deliverTx</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">very</span> <span class="n">slow</span><span class="p">,</span> <span class="mi">10</span><span class="n">s</span> <span class="k">for</span> <span class="k">each</span> <span class="n">tx</span> <span class="n">average</span>
</code></pre></div></div>

<h3 id="delivertx--read-update-one_update-without_lockwork">deliverTx:  read-update-(one_update) without_lock(work)</h3>

<p>no select for update for both payment and deliverTx</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>no error
</code></pre></div></div>

<p>fastest client:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">required_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">108</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">34</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">23</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">205</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">14</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">103</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">19</span><span class="p">}</span>
<span class="n">succeed_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">108</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">34</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">23</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">205</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">14</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">103</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">19</span><span class="p">}</span>
<span class="n">tx</span> <span class="n">num</span> <span class="n">percentages</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'21.13%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'6.653%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'0.978%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'4.500%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'40.11%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'2.739%'</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'20.15%'</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'3.718%'</span><span class="p">}</span>
<span class="n">tx_time_range</span> <span class="p">[</span><span class="k">min</span><span class="o">-</span><span class="k">max</span><span class="p">]</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> 
<span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">29213619232177734</span><span class="p">,</span> <span class="mi">15</span><span class="p">.</span><span class="mi">85537838935852</span><span class="p">],</span> 
<span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> 
<span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">003929853439331055</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">17207694053649902</span><span class="p">],</span> 
<span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> 
<span class="p">[</span><span class="mi">22</span><span class="p">.</span><span class="mi">21111297607422</span><span class="p">,</span> <span class="mi">47</span><span class="p">.</span><span class="mi">07701516151428</span><span class="p">],</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> 
<span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">09447598457336426</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5418219566345215</span><span class="p">],</span> 
<span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">33774304389953613</span><span class="p">,</span> <span class="mi">4</span><span class="p">.</span><span class="mi">764082908630371</span><span class="p">],</span> 
<span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> 
<span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">015622854232788086</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">10833883285522461</span><span class="p">],</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> 
<span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">04577994346618652</span><span class="p">,</span> <span class="mi">3</span><span class="p">.</span><span class="mi">471543073654175</span><span class="p">],</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> 
<span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">09161496162414551</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0478219985961914</span><span class="p">]}</span>
<span class="n">tx_time</span> <span class="n">middle</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">6085801124572754</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">012543916702270508</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">31</span><span class="p">.</span><span class="mi">134135961532593</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">17986512184143066</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">9095878601074219</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">031976938247680664</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">21289348602294922</span><span class="p">,</span> 
<span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">4970381259918213</span><span class="p">}</span>
<span class="n">tx_time</span> <span class="n">average</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">1</span><span class="p">.</span><span class="mi">1911020014021132</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">02088434555951287</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">34</span><span class="p">.</span><span class="mi">39734263420105</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">22077977139016855</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">1</span><span class="p">.</span><span class="mi">219485803929771</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">03438648155757359</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">6637284778854222</span><span class="p">,</span> 
<span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">48234487834729645</span><span class="p">}</span>
<span class="n">tx</span> <span class="nb">time</span> <span class="n">percentage</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'20.24%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'0.111%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'27.06%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'0.799%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'39.34%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'0.075%'</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'10.76%'</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'1.442%'</span><span class="p">}</span>

<span class="n">total</span> <span class="nb">time</span> <span class="n">used</span><span class="p">:</span> <span class="mi">635</span><span class="p">.</span><span class="mi">3489217758179</span> <span class="k">second</span> 
</code></pre></div></div>

<p>Slowest client:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">required_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">102</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">23</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">216</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">95</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">21</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">18</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">11</span><span class="p">}</span>
<span class="n">succeed_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">102</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">23</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">216</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">95</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">21</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">18</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">11</span><span class="p">}</span>
<span class="n">tx</span> <span class="n">num</span> <span class="n">percentages</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'19.96%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'4.500%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'42.27%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'4.892%'</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'18.59%'</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'4.109%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'3.522%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'2.152%'</span><span class="p">}</span>
<span class="n">tx_time_range</span> <span class="p">[</span><span class="k">min</span><span class="o">-</span><span class="k">max</span><span class="p">]</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> 
<span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">1857740879058838</span><span class="p">,</span> <span class="mi">11</span><span class="p">.</span><span class="mi">892062902450562</span><span class="p">],</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> 
<span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">0062808990478515625</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0505368709564209</span><span class="p">],</span> 
<span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">2558581829071045</span><span class="p">,</span> <span class="mi">18</span><span class="p">.</span><span class="mi">89508295059204</span><span class="p">],</span> 
<span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">0025110244750976562</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">17515301704406738</span><span class="p">],</span> 
<span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">022066831588745117</span><span class="p">,</span> <span class="mi">3</span><span class="p">.</span><span class="mi">8239736557006836</span><span class="p">],</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">04205584526062012</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">3377859592437744</span><span class="p">],</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> 
<span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">03157401084899902</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">18178391456604004</span><span class="p">],</span> 
<span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> 
<span class="p">[</span><span class="mi">9</span><span class="p">.</span><span class="mi">832619905471802</span><span class="p">,</span> <span class="mi">365</span><span class="p">.</span><span class="mi">1875970363617</span><span class="p">]}</span>
<span class="n">tx_time</span> <span class="n">middle</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">43971800804138184</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">013875961303710938</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">2</span><span class="p">.</span><span class="mi">0473878383636475</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0064849853515625</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1167299747467041</span><span class="p">,</span> 
<span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0714111328125</span><span class="p">,</span> 
<span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">08517193794250488</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">14</span><span class="p">.</span><span class="mi">988978147506714</span><span class="p">}</span>
<span class="n">tx_time</span> <span class="n">average</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">8911464074078728</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">019917218581489895</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">5</span><span class="p">.</span><span class="mi">707572164358916</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">022745304107666016</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">4815199701409591</span><span class="p">,</span> 
<span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">18543669155665807</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">09041327900356716</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">55</span><span class="p">.</span><span class="mi">98292777755044</span><span class="p">}</span>
<span class="n">tx</span> <span class="nb">time</span> <span class="n">percentage</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'4.562%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'0.022%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'61.88%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'0.028%'</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'2.296%'</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'0.195%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'0.081%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'30.91%'</span><span class="p">}</span>

<span class="n">total</span> <span class="nb">time</span> <span class="n">used</span><span class="p">:</span> <span class="mi">1992</span><span class="p">.</span><span class="mi">2072050571442</span> <span class="k">second</span>

</code></pre></div></div>

<h2 id="time-used-10-driver-read-1200-files-each">Time used 10 driver (read 1200 files each)</h2>

<h3 id="workloadb-experiments">WorkloadB experiments</h3>

<h4 id="original-workloadb">Original workloadB</h4>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code></code></pre></div></div>

<h4 id="use-workloadas-table-and-sqls-to-run-workloadbs-files">Use WorkloadA’s table and SQLs to run WorkloadB’s FIles</h4>

<p>Fastest</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">required_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">131</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">53</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">276</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">235</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">109</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">245</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">96</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">59</span><span class="p">}</span>
<span class="n">succeed_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">131</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">53</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">276</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">235</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">109</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">242</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">96</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">59</span><span class="p">}</span>
<span class="n">tx</span> <span class="n">num</span> <span class="n">percentages</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'10.90%'</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'4.412%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'22.98%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'19.56%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'9.075%'</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'20.14%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'7.993%'</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'4.912%'</span><span class="p">}</span>
<span class="n">tx_time_range</span> <span class="p">[</span><span class="k">min</span><span class="o">-</span><span class="k">max</span><span class="p">]</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">021309852600097656</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">780346155166626</span><span class="p">],</span> 
<span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">3503396511077881</span><span class="p">,</span> <span class="mi">9</span><span class="p">.</span><span class="mi">374873161315918</span><span class="p">],</span> 
<span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">004379749298095703</span><span class="p">,</span> <span class="mi">6</span><span class="p">.</span><span class="mi">7614569664001465</span><span class="p">],</span> 
<span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">026685237884521484</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">971534013748169</span><span class="p">],</span> 
<span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">035845041275024414</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5444281101226807</span><span class="p">],</span> 
<span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">05905580520629883</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">5464611053466797</span><span class="p">],</span> 
<span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">8881630897521973</span><span class="p">,</span> <span class="mi">24</span><span class="p">.</span><span class="mi">495393991470337</span><span class="p">],</span> 
<span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">9807653427124023</span><span class="p">,</span> <span class="mi">3</span><span class="p">.</span><span class="mi">7280821800231934</span><span class="p">]}</span>
<span class="n">tx_time</span> <span class="n">middle</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">17966103553771973</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">6332340240478516</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">09718871116638184</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">23813700675964355</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">10187959671020508</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3590378761291504</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">8</span><span class="p">.</span><span class="mi">739710092544556</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">1</span><span class="p">.</span><span class="mi">682279109954834</span><span class="p">}</span>
<span class="n">tx_time</span> <span class="n">average</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">22809107795016456</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">8253535144733932</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1481037735939026</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">25536085798385294</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">13727305788512623</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3941050787602574</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">9</span><span class="p">.</span><span class="mi">937843697766462</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">1</span><span class="p">.</span><span class="mi">7898441128811593</span><span class="p">}</span>
<span class="n">tx</span> <span class="nb">time</span> <span class="n">percentage</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'2.101%'</span><span class="p">,</span> 
<span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'3.076%'</span><span class="p">,</span> 
<span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'2.875%'</span><span class="p">,</span> 
<span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'4.220%'</span><span class="p">,</span> 
<span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'1.052%'</span><span class="p">,</span> 
<span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'6.707%'</span><span class="p">,</span> 
<span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'67.10%'</span><span class="p">,</span> 
<span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'7.427%'</span><span class="p">}</span>
<span class="n">total</span> <span class="nb">time</span> <span class="n">used</span><span class="p">:</span> <span class="mi">1421</span><span class="p">.</span><span class="mi">7876341342926</span> <span class="k">second</span>
</code></pre></div></div>

<p>slowest</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">required_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">130</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">136</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">228</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">221</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">244</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">69</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">58</span><span class="p">}</span>
<span class="n">succeed_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">130</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">136</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">220</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">221</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">244</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">69</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">58</span><span class="p">}</span>
<span class="n">tx</span> <span class="n">num</span> <span class="n">percentages</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'10.82%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'11.32%'</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'18.31%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'18.40%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'20.31%'</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'5.745%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'10.24%'</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'4.829%'</span><span class="p">}</span>
<span class="n">tx_time_range</span> <span class="p">[</span><span class="k">min</span><span class="o">-</span><span class="k">max</span><span class="p">]</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">010293006896972656</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">9475047588348389</span><span class="p">],</span> 
<span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">4942600727081299</span><span class="p">,</span> <span class="mi">25</span><span class="p">.</span><span class="mi">753175020217896</span><span class="p">],</span> 
<span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">06631588935852051</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0153987407684326</span><span class="p">],</span> 
<span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">04372715950012207</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">7704319953918457</span><span class="p">],</span> 
<span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">003039836883544922</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">1942729949951172</span><span class="p">],</span> 
<span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">8192739486694336</span><span class="p">,</span> <span class="mi">12</span><span class="p">.</span><span class="mi">131079196929932</span><span class="p">],</span> 
<span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">04195284843444824</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">8515450954437256</span><span class="p">],</span> 
<span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">3079490661621094</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">1520459651947021</span><span class="p">]}</span>
<span class="n">tx_time</span> <span class="n">middle</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">10607695579528809</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">7</span><span class="p">.</span><span class="mi">81226110458374</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">386444091796875</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">24327993392944336</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">10209298133850098</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">1</span><span class="p">.</span><span class="mi">8284311294555664</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">21391725540161133</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">6548361778259277</span><span class="p">}</span>
<span class="n">tx_time</span> <span class="n">average</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1405129469358004</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">9</span><span class="p">.</span><span class="mi">252860297175015</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">41195380145853217</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">25808596179496107</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">126881869112859</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">2</span><span class="p">.</span><span class="mi">08274341320646</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">24644212412640332</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">656815845390846</span><span class="p">}</span>
<span class="n">tx</span> <span class="nb">time</span> <span class="n">percentage</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'1.029%'</span><span class="p">,</span> 
<span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'70.92%'</span><span class="p">,</span>
<span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'5.108%'</span><span class="p">,</span>
<span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'3.214%'</span><span class="p">,</span> 
<span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'1.744%'</span><span class="p">,</span> 
<span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'8.099%'</span><span class="p">,</span> 
<span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'1.708%'</span><span class="p">,</span>
<span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'2.147%'</span><span class="p">}</span>

<span class="n">total</span> <span class="nb">time</span> <span class="n">used</span><span class="p">:</span> <span class="mi">1774</span><span class="p">.</span><span class="mi">2491250038147</span> <span class="k">second</span>
</code></pre></div></div>

<h1 id="server-experiments-result-compare">Server Experiments result compare</h1>

<h2 id="time-used-1-driver-1">Time used 1 driver</h2>

<h3 id="delivertx-read-update-many_update">deliverTx: read-update-(many_update)</h3>

<p>run 20k txs</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">8000</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">1200</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">400</span><span class="p">}</span>
<span class="n">succeed_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">8000</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">1200</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">400</span><span class="p">}</span>
<span class="n">tx</span> <span class="n">num</span> <span class="n">percentages</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'20.0%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'4.0%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'40.0%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'6.0%'</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'20.0%'</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'4.0%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'4.0%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'2.0%'</span><span class="p">}</span>
<span class="n">tx_time_range</span> <span class="p">[</span><span class="k">min</span><span class="o">-</span><span class="k">max</span><span class="p">]</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">0060214996337890625</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">33780407905578613</span><span class="p">],</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">00596165657043457</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">07077956199645996</span><span class="p">],</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">019092321395874023</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">41755151748657227</span><span class="p">],</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">001986265182495117</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">05776381492614746</span><span class="p">],</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">07428097724914551</span><span class="p">,</span> <span class="mi">2</span><span class="p">.</span><span class="mi">526358127593994</span><span class="p">],</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">04240083694458008</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3215057849884033</span><span class="p">],</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">013997316360473633</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3110795021057129</span><span class="p">],</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">6</span><span class="p">.</span><span class="mi">7307353019714355</span><span class="p">,</span> <span class="mi">14</span><span class="p">.</span><span class="mi">297910928726196</span><span class="p">]}</span>
<span class="n">tx_time</span> <span class="n">middle</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">008313655853271484</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">01041102409362793</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">043710947036743164</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">003559112548828125</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">10626363754272461</span><span class="p">,</span> 
<span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">07685685157775879</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">03121018409729004</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">7</span><span class="p">.</span><span class="mi">194573163986206</span><span class="p">}</span>
<span class="n">tx_time</span> <span class="n">average</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">013122805178165435</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">010978831052780151</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">04540513017773628</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">003740751345952352</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1465474825501442</span><span class="p">,</span> 
<span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">07841011106967927</span><span class="p">,</span> 
<span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">03239279538393021</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">7</span><span class="p">.</span><span class="mi">285398296713829</span><span class="p">}</span>
<span class="n">tx</span> <span class="nb">time</span> <span class="n">percentage</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'1.305%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'0.218%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'9.032%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'0.111%'</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'14.57%'</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'1.559%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'0.644%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'72.46%'</span><span class="p">}</span>

<span class="n">total</span> <span class="nb">time</span> <span class="n">used</span><span class="p">:</span> <span class="mi">4021</span><span class="p">.</span><span class="mi">6916489601135</span> <span class="k">second</span>
</code></pre></div></div>

<h3 id="delivertx--read-update-one_update">deliverTx:  read-update-(one_update)</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code></code></pre></div></div>

<h2 id="time-used-40-driver-1">Time used 40 driver</h2>

<h3 id="delivertx--read-update-one_update-1">deliverTx:  read-update-(one_update)</h3>

<h4 id="each-client-run-510-txs">each client run 510 txs.</h4>

<p>slowest:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="n">required_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">120</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">105</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">186</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">27</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">18</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">15</span><span class="p">}</span>
 <span class="n">succeed_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">120</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">105</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">186</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">27</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">18</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">15</span><span class="p">}</span>
 <span class="n">tx</span> <span class="n">num</span> <span class="n">percentages</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'23.48%'</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'20.54%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'2.935%'</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'4.892%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'36.39%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'5.283%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'3.522%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'2.935%'</span><span class="p">}</span>
 <span class="n">tx_time_range</span> <span class="p">[</span><span class="k">min</span><span class="o">-</span><span class="k">max</span><span class="p">]</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">07926630973815918</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">514117956161499</span><span class="p">],</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">00802922248840332</span><span class="p">,</span> <span class="mi">11</span><span class="p">.</span><span class="mi">034536123275757</span><span class="p">],</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">.</span><span class="mi">427427530288696</span><span class="p">,</span> <span class="mi">30</span><span class="p">.</span><span class="mi">756058931350708</span><span class="p">],</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">05641460418701172</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">858823299407959</span><span class="p">],</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">022408008575439453</span><span class="p">,</span> <span class="mi">20</span><span class="p">.</span><span class="mi">853935956954956</span><span class="p">],</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">003503561019897461</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">04083895683288574</span><span class="p">],</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">008797883987426758</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">04307365417480469</span><span class="p">],</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">028501272201538086</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">20843172073364258</span><span class="p">]}</span>
 <span class="n">tx_time</span> <span class="n">middle</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3175313472747803</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">02445507049560547</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">12</span><span class="p">.</span><span class="mi">067098140716553</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">30762481689453125</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">12956476211547852</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">007569074630737305</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">017569541931152344</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">08283782005310059</span><span class="p">}</span>
 <span class="n">tx_time</span> <span class="n">average</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3624229967594147</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">15619589941842216</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">13</span><span class="p">.</span><span class="mi">626139831542968</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5214762687683105</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">1</span><span class="p">.</span><span class="mi">4489447942344091</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">010478673157868561</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">021184523900349934</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">08491495450337729</span><span class="p">}</span>
 <span class="n">tx</span> <span class="nb">time</span> <span class="n">percentage</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'7.923%'</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'2.987%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'37.23%'</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'2.375%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'49.10%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'0.051%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'0.069%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'0.232%'</span><span class="p">}</span>

<span class="n">total</span> <span class="nb">time</span> <span class="n">used</span><span class="p">:</span> <span class="mi">548</span><span class="p">.</span><span class="mi">8836703300476</span> <span class="k">second</span>

</code></pre></div></div>

<p>fastes:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">required_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">22</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">24</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">22</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">219</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">103</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">94</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">18</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">9</span><span class="p">}</span>
<span class="n">succeed_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">22</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">24</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">22</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">219</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">103</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">94</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">18</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">9</span><span class="p">}</span>
<span class="n">tx</span> <span class="n">num</span> <span class="n">percentages</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'4.305%'</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'4.696%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'4.305%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'42.85%'</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'20.15%'</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'18.39%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'3.522%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'1.761%'</span><span class="p">}</span>
<span class="n">tx_time_range</span> <span class="p">[</span><span class="k">min</span><span class="o">-</span><span class="k">max</span><span class="p">]</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">007178783416748047</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">05989813804626465</span><span class="p">],</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">04727935791015625</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">9008371829986572</span><span class="p">],</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">0030879974365234375</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">008611679077148438</span><span class="p">],</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">019912004470825195</span><span class="p">,</span> <span class="mi">8</span><span class="p">.</span><span class="mi">040390253067017</span><span class="p">],</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">006520986557006836</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">23597025871276855</span><span class="p">],</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">06527543067932129</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">8222713470458984</span><span class="p">],</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">02312159538269043</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5057394504547119</span><span class="p">],</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">7</span><span class="p">.</span><span class="mi">1410744190216064</span><span class="p">,</span> <span class="mi">33</span><span class="p">.</span><span class="mi">241151094436646</span><span class="p">]}</span>
<span class="n">tx_time</span> <span class="n">middle</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">012470006942749023</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1013646125793457</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">003969907760620117</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0829315185546875</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">010275602340698242</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">12951278686523438</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">11683320999145508</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">16</span><span class="p">.</span><span class="mi">39730429649353</span><span class="p">}</span>
<span class="n">tx_time</span> <span class="n">average</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">02321205355904319</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">2693961759408315</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">004769942977211692</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">47296000180179126</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">02685007771242012</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">2327144551784434</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1290303866068522</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">16</span><span class="p">.</span><span class="mi">89860553211636</span><span class="p">}</span>
<span class="n">tx</span> <span class="nb">time</span> <span class="n">percentage</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'0.176%'</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'2.230%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'0.036%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'35.74%'</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'0.954%'</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'7.548%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'0.801%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'52.47%'</span><span class="p">}</span>

<span class="n">total</span> <span class="nb">time</span> <span class="n">used</span><span class="p">:</span> <span class="mi">289</span><span class="p">.</span><span class="mi">8033001422882</span> <span class="k">second</span>
</code></pre></div></div>

<h4 id="each-client-run-20k-txs">each client run 20k txs</h4>

<p>fastest</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">required_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">8000</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">1200</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">400</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">}</span>
<span class="n">succeed_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">8000</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">1200</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">400</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">}</span>
<span class="n">tx</span> <span class="n">num</span> <span class="n">percentages</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'20.0%'</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'20.0%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'40.0%'</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'4.0%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'6.0%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'4.0%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'2.0%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'4.0%'</span><span class="p">}</span>
<span class="n">tx_time_range</span> <span class="p">[</span><span class="k">min</span><span class="o">-</span><span class="k">max</span><span class="p">]</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">06705665588378906</span><span class="p">,</span> <span class="mi">4</span><span class="p">.</span><span class="mi">134788751602173</span><span class="p">],</span> 
<span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">008793115615844727</span><span class="p">,</span> <span class="mi">2</span><span class="p">.</span><span class="mi">2578651905059814</span><span class="p">],</span> 
<span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">028956174850463867</span><span class="p">,</span> <span class="mi">4</span><span class="p">.</span><span class="mi">808155059814453</span><span class="p">],</span> 
<span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">09809541702270508</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">8398656845092773</span><span class="p">],</span> 
<span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">002482891082763672</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">08717966079711914</span><span class="p">],</span> 
<span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">009213685989379883</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">15114474296569824</span><span class="p">],</span> 
<span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">11</span><span class="p">.</span><span class="mi">96610689163208</span><span class="p">,</span> <span class="mi">740</span><span class="p">.</span><span class="mi">4848074913025</span><span class="p">],</span> 
<span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">04797101020812988</span><span class="p">,</span> <span class="mi">6</span><span class="p">.</span><span class="mi">0720438957214355</span><span class="p">]}</span>
<span class="n">tx_time</span> <span class="n">middle</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3852264881134033</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">02516651153564453</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">09827184677124023</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">4055604934692383</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">012500286102294922</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">030287981033325195</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">37</span><span class="p">.</span><span class="mi">30942368507385</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">12674474716186523</span><span class="p">}</span>
<span class="n">tx_time</span> <span class="n">average</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">38580606019496916</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">03734551215171814</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">11287899878621101</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">42698204576969145</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">016467877825101215</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">034810789823532105</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">41</span><span class="p">.</span><span class="mi">62702798485756</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">14673392564058305</span><span class="p">}</span>
<span class="n">tx</span> <span class="nb">time</span> <span class="n">percentage</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'7.811%'</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'0.756%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'4.570%'</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'1.728%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'0.100%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'0.140%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'84.27%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'0.594%'</span><span class="p">}</span>

<span class="n">total</span> <span class="nb">time</span> <span class="n">used</span><span class="p">:</span> <span class="mi">19756</span><span class="p">.</span><span class="mi">858887195587</span> <span class="k">second</span>
</code></pre></div></div>

<p><strong>other</strong></p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">required_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">8000</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">400</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">1200</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">}</span>
<span class="n">succeed_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">8000</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">400</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">1200</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">}</span>
<span class="n">tx</span> <span class="n">num</span> <span class="n">percentages</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'20.0%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'40.0%'</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'20.0%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'2.0%'</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'4.0%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'6.0%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'4.0%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'4.0%'</span><span class="p">}</span>
<span class="n">tx_time_range</span> <span class="p">[</span><span class="k">min</span><span class="o">-</span><span class="k">max</span><span class="p">]</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">011700868606567383</span><span class="p">,</span> <span class="mi">6</span><span class="p">.</span><span class="mi">021044492721558</span><span class="p">],</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">03783273696899414</span><span class="p">,</span> <span class="mi">7</span><span class="p">.</span><span class="mi">171971321105957</span><span class="p">],</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">07146692276000977</span><span class="p">,</span> <span class="mi">3</span><span class="p">.</span><span class="mi">0683438777923584</span><span class="p">],</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">11</span><span class="p">.</span><span class="mi">694919347763062</span><span class="p">,</span> <span class="mi">641</span><span class="p">.</span><span class="mi">523820400238</span><span class="p">],</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">07011723518371582</span><span class="p">,</span> <span class="mi">3</span><span class="p">.</span><span class="mi">489598035812378</span><span class="p">],</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">004237651824951172</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">16576862335205078</span><span class="p">],</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">012814521789550781</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">27407145500183105</span><span class="p">],</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">0487818717956543</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0220296382904053</span><span class="p">]}</span>
<span class="n">tx_time</span> <span class="n">middle</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">031154155731201172</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">17205357551574707</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">43343448638916016</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">37</span><span class="p">.</span><span class="mi">826860666275024</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">43820905685424805</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">01496434211730957</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">03958630561828613</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">13144588470458984</span><span class="p">}</span>
<span class="n">tx_time</span> <span class="n">average</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">044870021760463716</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">19872215965390205</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">4211420692801476</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">42</span><span class="p">.</span><span class="mi">37313334107399</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">4614541020989418</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">019939674933751424</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">044618663191795346</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">14893208026885987</span><span class="p">}</span>
<span class="n">tx</span> <span class="nb">time</span> <span class="n">percentage</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'0.856%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'7.586%'</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'8.038%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'80.88%'</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'1.761%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'0.114%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'0.170%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'0.568%'</span><span class="p">}</span>


<span class="n">total</span> <span class="nb">time</span> <span class="n">used</span><span class="p">:</span> <span class="mi">20955</span><span class="p">.</span><span class="mi">921887159348</span> <span class="k">second</span>
</code></pre></div></div>

<h3 id="delivertx--read-update-one_update-new-relcustomer">deliverTx:  read-update-(one_update) +new RelCustomer</h3>

<h4 id="each-client-run-20k-txs-1">each client run 20k txs</h4>

<p>Fastest</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">required_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">8000</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">1200</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">400</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">}</span>
<span class="n">succeed_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">8000</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">1200</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">400</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">}</span>
<span class="n">tx</span> <span class="n">num</span> <span class="n">percentages</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'20.0%'</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'20.0%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'40.0%'</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'4.0%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'6.0%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'4.0%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'2.0%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'4.0%'</span><span class="p">}</span>
<span class="n">tx_time_range</span> <span class="p">[</span><span class="k">min</span><span class="o">-</span><span class="k">max</span><span class="p">]</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">06620430946350098</span><span class="p">,</span> <span class="mi">6</span><span class="p">.</span><span class="mi">688509464263916</span><span class="p">],</span> 
<span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">009000539779663086</span><span class="p">,</span> <span class="mi">2</span><span class="p">.</span><span class="mi">7680041790008545</span><span class="p">],</span> 
<span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">024884939193725586</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">7298657894134521</span><span class="p">],</span> 
<span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">049005746841430664</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5829017162322998</span><span class="p">],</span> 
<span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">00313568115234375</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1050264835357666</span><span class="p">],</span> 
<span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">006682872772216797</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1332716941833496</span><span class="p">],</span> 
<span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">02277207374572754</span><span class="p">,</span> <span class="mi">36</span><span class="p">.</span><span class="mi">79711151123047</span><span class="p">],</span> 
<span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">021960735321044922</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">49773216247558594</span><span class="p">]}</span>
<span class="n">tx_time</span> <span class="n">middle</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">39609622955322266</span><span class="p">,</span> 
<span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">03075861930847168</span><span class="p">,</span> 
<span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">10427308082580566</span><span class="p">,</span> 
<span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">19124054908752441</span><span class="p">,</span> 
<span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0076677799224853516</span><span class="p">,</span> 
<span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">015861988067626953</span><span class="p">,</span> 
<span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">10349750518798828</span><span class="p">,</span> 
<span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">06265783309936523</span><span class="p">}</span>
<span class="n">tx_time</span> <span class="n">average</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">7029072520136833</span><span class="p">,</span>
<span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">06172101533412933</span><span class="p">,</span> 
<span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">13628420701622962</span><span class="p">,</span> 
<span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1981538102030754</span><span class="p">,</span> 
<span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">010825100739796957</span><span class="p">,</span> 
<span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">02111440360546112</span><span class="p">,</span> 
<span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">6241337299346924</span><span class="p">,</span> 
<span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">07460264593362809</span><span class="p">}</span>
<span class="n">tx</span> <span class="nb">time</span> <span class="n">percentage</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'60.46%'</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'5.309%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'23.44%'</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'3.409%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'0.279%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'0.363%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'5.368%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'1.283%'</span><span class="p">}</span>

<span class="n">total</span> <span class="nb">time</span> <span class="n">used</span><span class="p">:</span> <span class="mi">4649</span><span class="p">.</span><span class="mi">980607509613</span> <span class="k">second</span> 
</code></pre></div></div>

<p>Slowest</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">required_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">8000</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">400</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">1200</span><span class="p">}</span>
<span class="n">succeed_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">8000</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">400</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">1200</span><span class="p">}</span>
<span class="n">tx</span> <span class="n">num</span> <span class="n">percentages</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'20.0%'</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'20.0%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'40.0%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'4.0%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'2.0%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'4.0%'</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'4.0%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'6.0%'</span><span class="p">}</span>
<span class="n">tx_time_range</span> <span class="p">[</span><span class="k">min</span><span class="o">-</span><span class="k">max</span><span class="p">]</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">06003117561340332</span><span class="p">,</span> <span class="mi">6</span><span class="p">.</span><span class="mi">687764644622803</span><span class="p">],</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">008917570114135742</span><span class="p">,</span> <span class="mi">3</span><span class="p">.</span><span class="mi">1278812885284424</span><span class="p">],</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">02373361587524414</span><span class="p">,</span> <span class="mi">3</span><span class="p">.</span><span class="mi">4845988750457764</span><span class="p">],</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">02218031883239746</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">4671635627746582</span><span class="p">],</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">031206130981445312</span><span class="p">,</span> <span class="mi">456</span><span class="p">.</span><span class="mi">23539090156555</span><span class="p">],</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">00858449935913086</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">11835384368896484</span><span class="p">],</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">05227994918823242</span><span class="p">,</span> <span class="mi">3</span><span class="p">.</span><span class="mi">2975709438323975</span><span class="p">],</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">0033254623413085938</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">11398196220397949</span><span class="p">]}</span>
<span class="n">tx_time</span> <span class="n">middle</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3909952640533447</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">027904987335205078</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">22519445419311523</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">06427168846130371</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">12715625762939453</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">019356966018676758</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">16162490844726562</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">008049726486206055</span><span class="p">}</span>
<span class="n">tx_time</span> <span class="n">average</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5571800107359887</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">053697246849536896</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3464160120487213</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">07861154049634933</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">4</span><span class="p">.</span><span class="mi">050478057861328</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">025514654219150543</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">18711606055498123</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">013249912858009338</span><span class="p">}</span>
<span class="n">tx</span> <span class="nb">time</span> <span class="n">percentage</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'31.42%'</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'3.028%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'39.07%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'0.886%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'22.84%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'0.287%'</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'2.110%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'0.224%'</span><span class="p">}</span>

<span class="n">total</span> <span class="nb">time</span> <span class="n">used</span><span class="p">:</span> <span class="mi">7091</span><span class="p">.</span><span class="mi">655424118042</span> <span class="k">second</span>
</code></pre></div></div>

<h3 id="workloadb-experiments-1">WorkloadB experiments</h3>

<h4 id="original-workloadb-without-history-read">Original workloadB-without history read</h4>

<p>fatest</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">required_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">1000</span><span class="p">}</span>
<span class="n">succeed_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">1000</span><span class="p">}</span>
<span class="n">tx</span> <span class="n">num</span> <span class="n">percentages</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'20.0%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'10.0%'</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'5.0%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'10.0%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'20.0%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'20.0%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'10.0%'</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'5.0%'</span><span class="p">}</span>
<span class="n">tx_time_range</span> <span class="p">[</span><span class="k">min</span><span class="o">-</span><span class="k">max</span><span class="p">]</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">043653011322021484</span><span class="p">,</span> <span class="mi">2</span><span class="p">.</span><span class="mi">937039852142334</span><span class="p">],</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">006611824035644531</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">10404109954833984</span><span class="p">],</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">007398128509521484</span><span class="p">,</span> <span class="mi">4</span><span class="p">.</span><span class="mi">316748857498169</span><span class="p">],</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">022179365158081055</span><span class="p">,</span> <span class="mi">2</span><span class="p">.</span><span class="mi">0832979679107666</span><span class="p">],</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">01425313949584961</span><span class="p">,</span> <span class="mi">27</span><span class="p">.</span><span class="mi">941823959350586</span><span class="p">],</span> 
<span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">0034437179565429688</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">30124664306640625</span><span class="p">],</span> 
<span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">03072643280029297</span><span class="p">,</span> <span class="mi">6</span><span class="p">.</span><span class="mi">985389232635498</span><span class="p">],</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">10069131851196289</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">9532630443572998</span><span class="p">]}</span>
<span class="n">tx_time</span> <span class="n">middle</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">15568161010742188</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">013590812683105469</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">012779712677001953</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">07341122627258301</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">15813660621643066</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">006154298782348633</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">1</span><span class="p">.</span><span class="mi">3094377517700195</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">19967222213745117</span><span class="p">}</span>
<span class="n">tx_time</span> <span class="n">average</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1743237208724022</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">01665512478351593</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">050359912872314457</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">08441155648231506</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">21077250862121583</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">009081676185131072</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">1</span><span class="p">.</span><span class="mi">4749051374197006</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">21938607478141783</span><span class="p">}</span>
<span class="n">tx</span> <span class="nb">time</span> <span class="n">percentage</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'13.94%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'0.666%'</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'1.006%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'3.375%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'16.85%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'0.726%'</span><span class="p">,</span> 
<span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'58.98%'</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'4.386%'</span><span class="p">}</span>
</code></pre></div></div>

<p>Slowest</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">required_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">2000</span><span class="p">}</span>
<span class="n">succeed_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">2000</span><span class="p">}</span>
<span class="n">tx</span> <span class="n">num</span> <span class="n">percentages</span> <span class="k">is</span><span class="p">:</span> 
<span class="p">{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'5.0%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'20.0%'</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'20.0%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'20.0%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'10.0%'</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'5.0%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'10.0%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'10.0%'</span><span class="p">}</span>
<span class="n">tx_time_range</span> <span class="p">[</span><span class="k">min</span><span class="o">-</span><span class="k">max</span><span class="p">]</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">12121295928955078</span><span class="p">,</span> <span class="mi">2</span><span class="p">.</span><span class="mi">440812110900879</span><span class="p">],</span> 
<span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">003799915313720703</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0838615894317627</span><span class="p">],</span> 
<span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">0406031608581543</span><span class="p">,</span> <span class="mi">2</span><span class="p">.</span><span class="mi">9131178855895996</span><span class="p">],</span> 
<span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">02302241325378418</span><span class="p">,</span> <span class="mi">59</span><span class="p">.</span><span class="mi">59907388687134</span><span class="p">],</span> 
<span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">008373022079467773</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">22054052352905273</span><span class="p">],</span> 
<span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">010132074356079102</span><span class="p">,</span> <span class="mi">3</span><span class="p">.</span><span class="mi">7663419246673584</span><span class="p">],</span> 
<span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">020366191864013672</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">4866340160369873</span><span class="p">],</span> 
<span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">038144826889038086</span><span class="p">,</span> <span class="mi">6</span><span class="p">.</span><span class="mi">873712778091431</span><span class="p">]}</span>
<span class="n">tx_time</span> <span class="n">middle</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">2431316375732422</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">009315967559814453</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1574840545654297</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">36730384826660156</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">019392967224121094</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">024661779403686523</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0724327564239502</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">1</span><span class="p">.</span><span class="mi">283696174621582</span><span class="p">}</span>
<span class="n">tx_time</span> <span class="n">average</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">2744468514919281</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">012445117533206939</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1759404569864273</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">4861455803513527</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">02346905255317688</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">08069565296173095</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">08723806083202362</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">1</span><span class="p">.</span><span class="mi">4893892135620117</span><span class="p">}</span>
<span class="n">tx</span> <span class="nb">time</span> <span class="n">percentage</span> <span class="k">is</span> <span class="p">:</span> 
<span class="p">{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'4.385%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'0.795%'</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'11.24%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'31.07%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'0.750%'</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'1.289%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'2.788%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'47.60%'</span><span class="p">}</span>
</code></pre></div></div>

<h4 id="original-workloadb-with-history-read">Original workloadB-with history read</h4>

<p>fastest</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">required_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">1000</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">succeed_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">1000</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx</span> <span class="n">num</span> <span class="n">percentages</span> <span class="k">is</span><span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'20.0%'</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'5.0%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'20.0%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'10.0%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'20.0%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'10.0%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'10.0%'</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'5.0%'</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx_time_range</span> <span class="p">[</span><span class="k">min</span><span class="o">-</span><span class="k">max</span><span class="p">]</span> <span class="k">is</span> <span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span>
<span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">04119515419006348</span><span class="p">,</span> <span class="mi">2</span><span class="p">.</span><span class="mi">123006582260132</span><span class="p">],</span> 
<span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">008533000946044922</span><span class="p">,</span> <span class="mi">2</span><span class="p">.</span><span class="mi">292015790939331</span><span class="p">],</span> 
<span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">002079010009765625</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">022124767303466797</span><span class="p">],</span> 
<span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">006811380386352539</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">2652583122253418</span><span class="p">],</span> 
<span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">018296003341674805</span><span class="p">,</span> <span class="mi">34</span><span class="p">.</span><span class="mi">09693646430969</span><span class="p">],</span> 
<span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">03715825080871582</span><span class="p">,</span> <span class="mi">25</span><span class="p">.</span><span class="mi">316109657287598</span><span class="p">],</span> 
<span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">020386695861816406</span><span class="p">,</span> <span class="mi">3</span><span class="p">.</span><span class="mi">5080161094665527</span><span class="p">],</span> 
<span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">0776679515838623</span><span class="p">,</span> <span class="mi">4</span><span class="p">.</span><span class="mi">463620185852051</span><span class="p">]}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx_time</span> <span class="n">middle</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">10662221908569336</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">013123750686645508</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">003186464309692383</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">012742042541503906</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1964890956878662</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">1</span><span class="p">.</span><span class="mi">231938362121582</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">048102617263793945</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">17396807670593262</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx_time</span> <span class="n">average</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span>
<span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">11312417471408844</span><span class="p">,</span> 
<span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">059289373874664306</span><span class="p">,</span> 
<span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">003660040080547333</span><span class="p">,</span> 
<span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">015427935361862183</span><span class="p">,</span> 
<span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">2941498779058456</span><span class="p">,</span>
<span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">1</span><span class="p">.</span><span class="mi">3363996965885163</span><span class="p">,</span>
<span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">061666582942008975</span><span class="p">,</span> 
<span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">19275231623649597</span><span class="p">}</span>
<span class="n">tx</span> <span class="nb">time</span> <span class="n">percentage</span> <span class="k">is</span> <span class="p">:</span> <span class="p">{</span>
<span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'9.570%'</span><span class="p">,</span> 
<span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'1.254%'</span><span class="p">,</span> 
<span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'0.309%'</span><span class="p">,</span> 
<span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'0.652%'</span><span class="p">,</span> 
<span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'24.88%'</span><span class="p">,</span> 
<span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'56.53%'</span><span class="p">,</span> 
<span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'2.608%'</span><span class="p">,</span> 
<span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'4.076%'</span><span class="p">}</span>

<span class="n">total</span> <span class="nb">time</span> <span class="n">used</span><span class="p">:</span> <span class="mi">4727</span><span class="p">.</span><span class="mi">852853536606</span> <span class="k">second</span> <span class="o">=====================</span>
</code></pre></div></div>

<p>notes:</p>

<p>in new order, this is very slow</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">DEBUG</span><span class="p">:</span><span class="n">__main__</span><span class="p">:[</span><span class="k">UPDATE</span> <span class="n">district</span> <span class="k">SET</span> <span class="n">D_NEXT_O_ID</span> <span class="o">=</span> <span class="n">D_NEXT_O_ID</span> <span class="o">+</span> <span class="mi">1</span> <span class="k">WHERE</span> <span class="n">D_W_ID</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">and</span> <span class="n">D_ID</span> <span class="o">=</span> <span class="mi">2</span> <span class="n">returning</span> <span class="n">D_NEXT_O_ID</span><span class="p">,</span> <span class="n">d_tax</span><span class="p">;]:</span>   <span class="mi">25216425</span> <span class="n">us</span>
</code></pre></div></div>

<p>In relatedCustomer , this is very slow</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">IP_I1_ID</span><span class="p">,</span> <span class="n">IP_I2_ID</span> <span class="k">FROM</span> <span class="n">item_pair</span> <span class="k">WHERE</span> <span class="n">IP_W_ID</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">AND</span> <span class="n">IP_D_ID</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">AND</span> <span class="n">IP_C_ID</span> <span class="o">=</span> <span class="mi">1250</span> <span class="p">]:</span>   <span class="mi">141559</span> <span class="n">us</span>
</code></pre></div></div>

<p>Slowest</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">NFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="k">connect</span> <span class="k">to</span> <span class="n">postgresql</span><span class="p">:</span><span class="o">//</span><span class="n">naili</span><span class="p">:</span><span class="o">@</span><span class="n">xcnd56</span><span class="p">:</span><span class="mi">27257</span><span class="o">/</span><span class="n">cs5424db</span><span class="p">,</span> <span class="k">Read</span> <span class="n">file</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">stuproj</span><span class="o">/</span><span class="n">cs4224p</span><span class="o">/</span><span class="k">temp</span><span class="o">/</span><span class="n">tasks</span><span class="o">/</span><span class="n">project_files_4</span><span class="o">/</span><span class="n">xact_files_B</span><span class="o">/</span><span class="mi">21</span><span class="p">.</span><span class="n">txt</span> <span class="k">and</span> <span class="n">run</span> <span class="n">workload</span> <span class="n">B</span>

<span class="n">required_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">2000</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">succeed_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">2000</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx</span> <span class="n">num</span> <span class="n">percentages</span> <span class="k">is</span><span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'10.0%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'20.0%'</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'5.0%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'20.0%'</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'20.0%'</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'5.0%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'10.0%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'10.0%'</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx_time_range</span> <span class="p">[</span><span class="k">min</span><span class="o">-</span><span class="k">max</span><span class="p">]</span> <span class="k">is</span> <span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">006795644760131836</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">10069489479064941</span><span class="p">],</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">003291606903076172</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">12161922454833984</span><span class="p">],</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">0820157527923584</span><span class="p">,</span> <span class="mi">3</span><span class="p">.</span><span class="mi">863018035888672</span><span class="p">],</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">023424148559570312</span><span class="p">,</span> <span class="mi">227</span><span class="p">.</span><span class="mi">8955101966858</span><span class="p">],</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">03539538383483887</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">9753758907318115</span><span class="p">],</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">011014938354492188</span><span class="p">,</span> <span class="mi">2</span><span class="p">.</span><span class="mi">0942068099975586</span><span class="p">],</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">0325620174407959</span><span class="p">,</span> <span class="mi">20</span><span class="p">.</span><span class="mi">171861171722412</span><span class="p">],</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">018865108489990234</span><span class="p">,</span> <span class="mi">3</span><span class="p">.</span><span class="mi">837775707244873</span><span class="p">]}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx_time</span> <span class="n">middle</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">016010046005249023</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">006000995635986328</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">17874932289123535</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">32175230979919434</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">10468935966491699</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">020900964736938477</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">8674423694610596</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">04611515998840332</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx_time</span> <span class="n">average</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">01981469678878784</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">007989742159843445</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">2026522629261017</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">6211161369085312</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">11278318470716477</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">04882942843437195</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0938691581487656</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">05847097361087799</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx</span> <span class="nb">time</span> <span class="n">percentage</span> <span class="k">is</span> <span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span>
<span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'0.711%'</span><span class="p">,</span> 
<span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'0.573%'</span><span class="p">,</span> 
<span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'3.639%'</span><span class="p">,</span> 
<span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'44.61%'</span><span class="p">,</span> 
<span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'8.101%'</span><span class="p">,</span>
<span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'0.876%'</span><span class="p">,</span> 
<span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'39.28%'</span><span class="p">,</span> 
<span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'2.100%'</span><span class="p">}</span>

<span class="n">total</span> <span class="nb">time</span> <span class="n">used</span><span class="p">:</span> <span class="mi">5568</span><span class="p">.</span><span class="mi">371900320053</span> <span class="k">second</span>
</code></pre></div></div>

<h4 id="use-workloadas-table-and-sqls-to-run-workloadbs-files-100-tx-each-client-only">Use WorkloadA’s table and SQLs to run WorkloadB’s FIles (100 tx each client only)</h4>

<p>set log-detail to false</p>

<p>read history data</p>

<p>Test only 100</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">required_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">21</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">19</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">17</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">12</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">succeed_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">21</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">19</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">17</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">12</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx</span> <span class="n">num</span> <span class="n">percentages</span> <span class="k">is</span><span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'6.930%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'20.79%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'10.89%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'18.81%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'8.910%'</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'16.83%'</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'4.950%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'11.88%'</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx_time_range</span> <span class="p">[</span><span class="k">min</span><span class="o">-</span><span class="k">max</span><span class="p">]</span> <span class="k">is</span> <span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">08615255355834961</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">168724775314331</span><span class="p">],</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">0034422874450683594</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">06905293464660645</span><span class="p">],</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">10105299949645996</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">1931192874908447</span><span class="p">],</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">05597734451293945</span><span class="p">,</span> <span class="mi">5</span><span class="p">.</span><span class="mi">553996562957764</span><span class="p">],</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">05745959281921387</span><span class="p">,</span> <span class="mi">2</span><span class="p">.</span><span class="mi">086024284362793</span><span class="p">],</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">09922575950622559</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0295624732971191</span><span class="p">],</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">01640772819519043</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">08808469772338867</span><span class="p">],</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">011550426483154297</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">12307357788085938</span><span class="p">]}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx_time</span> <span class="n">middle</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">43329501152038574</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0073413848876953125</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">19635534286499023</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">19931316375732422</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">08235359191894531</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3723490238189697</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">04191994667053223</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">04134869575500488</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx_time</span> <span class="n">average</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">4667386668069022</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">010829891477312361</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3025944232940674</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5301264461718107</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3165012200673421</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">36663471951204185</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">05115065574645996</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">047169347604115806</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx</span> <span class="nb">time</span> <span class="n">percentage</span> <span class="k">is</span> <span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'12.16%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'0.847%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'12.39%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'37.51%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'10.60%'</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'23.21%'</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'0.952%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'2.108%'</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">============================</span> <span class="n">total</span> <span class="nb">time</span> <span class="n">used</span><span class="p">:</span> <span class="mi">26</span><span class="p">.</span><span class="mi">84976100921631</span> <span class="k">second</span> <span class="o">=====================</span>
</code></pre></div></div>

<p>slowest</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">required_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">17</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">21</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">29</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">13</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">4</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">succeed_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">17</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">21</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">29</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">13</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">4</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx</span> <span class="n">num</span> <span class="n">percentages</span> <span class="k">is</span><span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'16.83%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'20.79%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'28.71%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'12.87%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'6.930%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'4.950%'</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'4.950%'</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'3.960%'</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx_time_range</span> <span class="p">[</span><span class="k">min</span><span class="o">-</span><span class="k">max</span><span class="p">]</span> <span class="k">is</span> <span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">051306724548339844</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">4875149726867676</span><span class="p">],</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">027841567993164062</span><span class="p">,</span> <span class="mi">159</span><span class="p">.</span><span class="mi">23399114608765</span><span class="p">],</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">0019061565399169922</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">011357784271240234</span><span class="p">],</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">030652999877929688</span><span class="p">,</span> <span class="mi">6</span><span class="p">.</span><span class="mi">566680669784546</span><span class="p">],</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">007851362228393555</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">014297246932983398</span><span class="p">],</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">027576684951782227</span><span class="p">,</span> <span class="mi">3</span><span class="p">.</span><span class="mi">9981250762939453</span><span class="p">],</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">008518695831298828</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">011621475219726562</span><span class="p">],</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">07341361045837402</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">7170028686523438</span><span class="p">]}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx_time</span> <span class="n">middle</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">08894801139831543</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">08863329887390137</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0023033618927001953</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">04650449752807617</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">008876562118530273</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">03904247283935547</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">011400461196899414</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3067479133605957</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx_time</span> <span class="n">average</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">12733178980210247</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">10</span><span class="p">.</span><span class="mi">390213955016364</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0027938217952333646</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">6073061319497916</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">010353531156267439</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">8286996364593506</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">010662078857421875</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5964043736457825</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx</span> <span class="nb">time</span> <span class="n">percentage</span> <span class="k">is</span> <span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'0.920%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'92.81%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'0.034%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'3.358%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'0.030%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'1.762%'</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'0.022%'</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'1.014%'</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">============================</span> <span class="n">total</span> <span class="nb">time</span> <span class="n">used</span><span class="p">:</span> <span class="mi">235</span><span class="p">.</span><span class="mi">0949182510376</span> <span class="k">second</span> <span class="o">=====================</span>
</code></pre></div></div>

<h1 id="优化relcustomer">优化RelCustomer</h1>

<h2 id="问题1-每个order每次selectjoin时间都一样">问题1: 每个order每次select..join时间都一样</h2>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span> <span class="k">SELECT</span> <span class="n">O_ID</span><span class="p">,</span> <span class="n">O_W_ID</span><span class="p">,</span> <span class="n">O_D_ID</span> <span class="k">FROM</span> <span class="n">order_ori</span> <span class="k">WHERE</span> <span class="n">O_W_ID</span> <span class="o">=</span> <span class="mi">5</span> <span class="k">AND</span> <span class="n">O_D_ID</span> <span class="o">=</span> <span class="mi">3</span> <span class="k">AND</span> <span class="n">O_C_ID</span> <span class="o">=</span> <span class="mi">2289</span> <span class="p">]:</span>   <span class="mi">1201</span> <span class="n">us</span>

<span class="p">[</span> <span class="k">WITH</span> <span class="n">items</span> <span class="k">AS</span> <span class="p">(</span><span class="k">SELECT</span> <span class="n">OL_I_ID</span> <span class="k">FROM</span> <span class="n">order_line</span> <span class="k">WHERE</span> <span class="n">OL_O_ID</span> <span class="o">=</span> <span class="mi">3011</span> <span class="k">AND</span> <span class="n">OL_W_ID</span> <span class="o">=</span> <span class="mi">5</span> <span class="k">AND</span> <span class="n">OL_D_ID</span> <span class="o">=</span> <span class="mi">3</span><span class="p">),</span> <span class="n">customer_ol</span> <span class="k">AS</span> <span class="p">(</span><span class="k">SELECT</span> <span class="n">O_C_ID</span><span class="p">,</span> <span class="n">O_W_ID</span><span class="p">,</span> <span class="n">O_D_ID</span><span class="p">,</span> <span class="n">O_ID</span><span class="p">,</span> <span class="n">order_line</span><span class="p">.</span><span class="n">OL_I_ID</span> <span class="k">FROM</span> <span class="n">order_ori</span> <span class="k">JOIN</span> <span class="n">order_line</span> <span class="k">ON</span> <span class="n">O_W_ID</span> <span class="o">=</span> <span class="n">order_line</span><span class="p">.</span><span class="n">OL_W_ID</span> <span class="k">AND</span> <span class="n">O_D_ID</span> <span class="o">=</span> <span class="n">order_line</span><span class="p">.</span><span class="n">OL_D_ID</span> <span class="k">AND</span> <span class="n">O_ID</span> <span class="o">=</span> <span class="n">order_line</span><span class="p">.</span><span class="n">OL_O_ID</span> <span class="k">WHERE</span> <span class="n">O_W_ID</span> <span class="o">&lt;&gt;</span> <span class="mi">5</span> <span class="p">)</span> <span class="k">SELECT</span> <span class="k">DISTINCT</span> <span class="n">O_W_ID</span><span class="p">,</span> <span class="n">O_D_ID</span><span class="p">,</span> <span class="n">O_C_ID</span> <span class="k">FROM</span> <span class="n">items</span> <span class="k">LEFT</span> <span class="k">JOIN</span> <span class="n">customer_ol</span> <span class="k">ON</span> <span class="n">items</span><span class="p">.</span><span class="n">OL_I_ID</span> <span class="o">=</span> <span class="n">customer_ol</span><span class="p">.</span><span class="n">OL_I_ID</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">O_C_ID</span><span class="p">,</span> <span class="n">O_W_ID</span><span class="p">,</span> <span class="n">O_D_ID</span><span class="p">,</span> <span class="n">O_ID</span> <span class="k">HAVING</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span> <span class="p">]:</span>   <span class="mi">9123286</span> <span class="n">us</span>

<span class="p">[</span> <span class="k">WITH</span> <span class="n">items</span> <span class="k">AS</span> <span class="p">(</span><span class="k">SELECT</span> <span class="n">OL_I_ID</span> <span class="k">FROM</span> <span class="n">order_line</span> <span class="k">WHERE</span> <span class="n">OL_O_ID</span> <span class="o">=</span> <span class="mi">1815</span> <span class="k">AND</span> <span class="n">OL_W_ID</span> <span class="o">=</span> <span class="mi">5</span> <span class="k">AND</span> <span class="n">OL_D_ID</span> <span class="o">=</span> <span class="mi">3</span><span class="p">),</span> <span class="n">customer_ol</span> <span class="k">AS</span> <span class="p">(</span><span class="k">SELECT</span> <span class="n">O_C_ID</span><span class="p">,</span> <span class="n">O_W_ID</span><span class="p">,</span> <span class="n">O_D_ID</span><span class="p">,</span> <span class="n">O_ID</span><span class="p">,</span> <span class="n">order_line</span><span class="p">.</span><span class="n">OL_I_ID</span> <span class="k">FROM</span> <span class="n">order_ori</span> <span class="k">JOIN</span> <span class="n">order_line</span> <span class="k">ON</span> <span class="n">O_W_ID</span> <span class="o">=</span> <span class="n">order_line</span><span class="p">.</span><span class="n">OL_W_ID</span> <span class="k">AND</span> <span class="n">O_D_ID</span> <span class="o">=</span> <span class="n">order_line</span><span class="p">.</span><span class="n">OL_D_ID</span> <span class="k">AND</span> <span class="n">O_ID</span> <span class="o">=</span> <span class="n">order_line</span><span class="p">.</span><span class="n">OL_O_ID</span> <span class="k">WHERE</span> <span class="n">O_W_ID</span> <span class="o">&lt;&gt;</span> <span class="mi">5</span> <span class="p">)</span> <span class="k">SELECT</span> <span class="k">DISTINCT</span> <span class="n">O_W_ID</span><span class="p">,</span> <span class="n">O_D_ID</span><span class="p">,</span> <span class="n">O_C_ID</span> <span class="k">FROM</span> <span class="n">items</span> <span class="k">LEFT</span> <span class="k">JOIN</span> <span class="n">customer_ol</span> <span class="k">ON</span> <span class="n">items</span><span class="p">.</span><span class="n">OL_I_ID</span> <span class="o">=</span> <span class="n">customer_ol</span><span class="p">.</span><span class="n">OL_I_ID</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">O_C_ID</span><span class="p">,</span> <span class="n">O_W_ID</span><span class="p">,</span> <span class="n">O_D_ID</span><span class="p">,</span> <span class="n">O_ID</span> <span class="k">HAVING</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span> <span class="p">]:</span>   <span class="mi">8458964</span> <span class="n">us</span>

</code></pre></div></div>

<h1 id="server-experiments-final">Server Experiments final</h1>

<h2 id="check-workloada-tables-range-information">check workloadA tables range information</h2>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">root</span><span class="o">@</span><span class="n">xcnd55</span><span class="p">:</span><span class="mi">27257</span><span class="o">/</span><span class="n">cs5424db</span><span class="o">&gt;</span> <span class="k">show</span> <span class="n">ranges</span> <span class="k">from</span> <span class="k">table</span> <span class="n">workloadA</span><span class="p">.</span><span class="n">customer</span><span class="p">;</span>
  <span class="n">start_key</span> <span class="o">|</span> <span class="n">end_key</span> <span class="o">|</span> <span class="n">range_id</span> <span class="o">|</span> <span class="n">range_size_mb</span> <span class="o">|</span> <span class="n">lease_holder</span> <span class="o">|</span> <span class="n">lease_holder_locality</span> <span class="o">|</span> <span class="n">replicas</span> <span class="o">|</span> <span class="n">replica_localities</span>
<span class="c1">------------+---------+----------+---------------+--------------+-----------------------+----------+---------------------</span>
  <span class="k">NULL</span>      <span class="o">|</span> <span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mi">1</span>    <span class="o">|</span>      <span class="mi">458</span> <span class="o">|</span>             <span class="mi">0</span> <span class="o">|</span>            <span class="mi">5</span> <span class="o">|</span>                       <span class="o">|</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">}</span>  <span class="o">|</span> <span class="p">{,,}</span>
  <span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mi">1</span>      <span class="o">|</span> <span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mi">10</span>   <span class="o">|</span>      <span class="mi">462</span> <span class="o">|</span>     <span class="mi">32</span><span class="p">.</span><span class="mi">160704</span> <span class="o">|</span>            <span class="mi">5</span> <span class="o">|</span>                       <span class="o">|</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">}</span>  <span class="o">|</span> <span class="p">{,,}</span>
  <span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mi">10</span>     <span class="o">|</span> <span class="o">/</span><span class="mi">2</span><span class="o">/</span><span class="mi">1</span>    <span class="o">|</span>      <span class="mi">397</span> <span class="o">|</span>       <span class="mi">3</span><span class="p">.</span><span class="mi">57507</span> <span class="o">|</span>            <span class="mi">5</span> <span class="o">|</span>                       <span class="o">|</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">}</span>  <span class="o">|</span> <span class="p">{,,}</span>
  <span class="o">/</span><span class="mi">2</span><span class="o">/</span><span class="mi">1</span>      <span class="o">|</span> <span class="o">/</span><span class="mi">2</span><span class="o">/</span><span class="mi">10</span>   <span class="o">|</span>      <span class="mi">373</span> <span class="o">|</span>     <span class="mi">32</span><span class="p">.</span><span class="mi">127344</span> <span class="o">|</span>            <span class="mi">3</span> <span class="o">|</span>                       <span class="o">|</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">}</span>  <span class="o">|</span> <span class="p">{,,}</span>
  <span class="o">/</span><span class="mi">2</span><span class="o">/</span><span class="mi">10</span>     <span class="o">|</span> <span class="o">/</span><span class="mi">3</span><span class="o">/</span><span class="mi">1</span>    <span class="o">|</span>      <span class="mi">376</span> <span class="o">|</span>      <span class="mi">3</span><span class="p">.</span><span class="mi">553868</span> <span class="o">|</span>            <span class="mi">3</span> <span class="o">|</span>                       <span class="o">|</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">}</span>  <span class="o">|</span> <span class="p">{,,}</span>
  <span class="o">/</span><span class="mi">3</span><span class="o">/</span><span class="mi">1</span>      <span class="o">|</span> <span class="o">/</span><span class="mi">3</span><span class="o">/</span><span class="mi">10</span>   <span class="o">|</span>      <span class="mi">437</span> <span class="o">|</span>     <span class="mi">32</span><span class="p">.</span><span class="mi">216628</span> <span class="o">|</span>            <span class="mi">3</span> <span class="o">|</span>                       <span class="o">|</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">}</span>  <span class="o">|</span> <span class="p">{,,}</span>
  <span class="o">/</span><span class="mi">3</span><span class="o">/</span><span class="mi">10</span>     <span class="o">|</span> <span class="o">/</span><span class="mi">4</span><span class="o">/</span><span class="mi">1</span>    <span class="o">|</span>      <span class="mi">438</span> <span class="o">|</span>      <span class="mi">3</span><span class="p">.</span><span class="mi">572468</span> <span class="o">|</span>            <span class="mi">3</span> <span class="o">|</span>                       <span class="o">|</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">}</span>  <span class="o">|</span> <span class="p">{,,}</span>
  <span class="o">/</span><span class="mi">4</span><span class="o">/</span><span class="mi">1</span>      <span class="o">|</span> <span class="o">/</span><span class="mi">4</span><span class="o">/</span><span class="mi">10</span>   <span class="o">|</span>      <span class="mi">439</span> <span class="o">|</span>     <span class="mi">32</span><span class="p">.</span><span class="mi">129364</span> <span class="o">|</span>            <span class="mi">3</span> <span class="o">|</span>                       <span class="o">|</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">}</span>  <span class="o">|</span> <span class="p">{,,}</span>
  <span class="o">/</span><span class="mi">4</span><span class="o">/</span><span class="mi">10</span>     <span class="o">|</span> <span class="o">/</span><span class="mi">5</span><span class="o">/</span><span class="mi">1</span>    <span class="o">|</span>      <span class="mi">440</span> <span class="o">|</span>      <span class="mi">3</span><span class="p">.</span><span class="mi">583344</span> <span class="o">|</span>            <span class="mi">3</span> <span class="o">|</span>                       <span class="o">|</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">}</span>  <span class="o">|</span> <span class="p">{,,}</span>
  <span class="o">/</span><span class="mi">5</span><span class="o">/</span><span class="mi">1</span>      <span class="o">|</span> <span class="o">/</span><span class="mi">5</span><span class="o">/</span><span class="mi">10</span>   <span class="o">|</span>      <span class="mi">441</span> <span class="o">|</span>     <span class="mi">32</span><span class="p">.</span><span class="mi">129172</span> <span class="o">|</span>            <span class="mi">3</span> <span class="o">|</span>                       <span class="o">|</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">}</span>  <span class="o">|</span> <span class="p">{,,}</span>
  <span class="o">/</span><span class="mi">5</span><span class="o">/</span><span class="mi">10</span>     <span class="o">|</span> <span class="o">/</span><span class="mi">6</span><span class="o">/</span><span class="mi">1</span>    <span class="o">|</span>      <span class="mi">442</span> <span class="o">|</span>      <span class="mi">3</span><span class="p">.</span><span class="mi">571376</span> <span class="o">|</span>            <span class="mi">3</span> <span class="o">|</span>                       <span class="o">|</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">}</span>  <span class="o">|</span> <span class="p">{,,}</span>
  <span class="o">/</span><span class="mi">6</span><span class="o">/</span><span class="mi">1</span>      <span class="o">|</span> <span class="o">/</span><span class="mi">6</span><span class="o">/</span><span class="mi">10</span>   <span class="o">|</span>      <span class="mi">445</span> <span class="o">|</span>     <span class="mi">32</span><span class="p">.</span><span class="mi">191418</span> <span class="o">|</span>            <span class="mi">3</span> <span class="o">|</span>                       <span class="o">|</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">}</span>  <span class="o">|</span> <span class="p">{,,}</span>
  <span class="o">/</span><span class="mi">6</span><span class="o">/</span><span class="mi">10</span>     <span class="o">|</span> <span class="o">/</span><span class="mi">7</span><span class="o">/</span><span class="mi">1</span>    <span class="o">|</span>      <span class="mi">446</span> <span class="o">|</span>      <span class="mi">3</span><span class="p">.</span><span class="mi">564142</span> <span class="o">|</span>            <span class="mi">1</span> <span class="o">|</span>                       <span class="o">|</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">}</span>  <span class="o">|</span> <span class="p">{,,}</span>
  <span class="o">/</span><span class="mi">7</span><span class="o">/</span><span class="mi">1</span>      <span class="o">|</span> <span class="o">/</span><span class="mi">7</span><span class="o">/</span><span class="mi">10</span>   <span class="o">|</span>      <span class="mi">477</span> <span class="o">|</span>     <span class="mi">32</span><span class="p">.</span><span class="mi">180704</span> <span class="o">|</span>            <span class="mi">3</span> <span class="o">|</span>                       <span class="o">|</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">}</span>  <span class="o">|</span> <span class="p">{,,}</span>
  <span class="o">/</span><span class="mi">7</span><span class="o">/</span><span class="mi">10</span>     <span class="o">|</span> <span class="o">/</span><span class="mi">8</span><span class="o">/</span><span class="mi">1</span>    <span class="o">|</span>      <span class="mi">398</span> <span class="o">|</span>       <span class="mi">3</span><span class="p">.</span><span class="mi">57043</span> <span class="o">|</span>            <span class="mi">5</span> <span class="o">|</span>                       <span class="o">|</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">}</span>  <span class="o">|</span> <span class="p">{,,}</span>
  <span class="o">/</span><span class="mi">8</span><span class="o">/</span><span class="mi">1</span>      <span class="o">|</span> <span class="o">/</span><span class="mi">8</span><span class="o">/</span><span class="mi">10</span>   <span class="o">|</span>      <span class="mi">399</span> <span class="o">|</span>     <span class="mi">32</span><span class="p">.</span><span class="mi">107972</span> <span class="o">|</span>            <span class="mi">2</span> <span class="o">|</span>                       <span class="o">|</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">}</span>  <span class="o">|</span> <span class="p">{,,}</span>
  <span class="o">/</span><span class="mi">8</span><span class="o">/</span><span class="mi">10</span>     <span class="o">|</span> <span class="o">/</span><span class="mi">9</span><span class="o">/</span><span class="mi">1</span>    <span class="o">|</span>      <span class="mi">400</span> <span class="o">|</span>      <span class="mi">3</span><span class="p">.</span><span class="mi">553534</span> <span class="o">|</span>            <span class="mi">2</span> <span class="o">|</span>                       <span class="o">|</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">}</span>  <span class="o">|</span> <span class="p">{,,}</span>
  <span class="o">/</span><span class="mi">9</span><span class="o">/</span><span class="mi">1</span>      <span class="o">|</span> <span class="o">/</span><span class="mi">9</span><span class="o">/</span><span class="mi">10</span>   <span class="o">|</span>      <span class="mi">401</span> <span class="o">|</span>     <span class="mi">32</span><span class="p">.</span><span class="mi">091696</span> <span class="o">|</span>            <span class="mi">2</span> <span class="o">|</span>                       <span class="o">|</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">}</span>  <span class="o">|</span> <span class="p">{,,}</span>
  <span class="o">/</span><span class="mi">9</span><span class="o">/</span><span class="mi">10</span>     <span class="o">|</span> <span class="o">/</span><span class="mi">10</span><span class="o">/</span><span class="mi">1</span>   <span class="o">|</span>      <span class="mi">402</span> <span class="o">|</span>      <span class="mi">3</span><span class="p">.</span><span class="mi">570706</span> <span class="o">|</span>            <span class="mi">2</span> <span class="o">|</span>                       <span class="o">|</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">}</span>  <span class="o">|</span> <span class="p">{,,}</span>
  <span class="o">/</span><span class="mi">10</span><span class="o">/</span><span class="mi">1</span>     <span class="o">|</span> <span class="o">/</span><span class="mi">10</span><span class="o">/</span><span class="mi">10</span>  <span class="o">|</span>      <span class="mi">403</span> <span class="o">|</span>     <span class="mi">32</span><span class="p">.</span><span class="mi">118422</span> <span class="o">|</span>            <span class="mi">2</span> <span class="o">|</span>                       <span class="o">|</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">}</span>  <span class="o">|</span> <span class="p">{,,}</span>
  <span class="o">/</span><span class="mi">10</span><span class="o">/</span><span class="mi">10</span>    <span class="o">|</span> <span class="k">NULL</span>    <span class="o">|</span>      <span class="mi">404</span> <span class="o">|</span>     <span class="mi">14</span><span class="p">.</span><span class="mi">341556</span> <span class="o">|</span>            <span class="mi">5</span> <span class="o">|</span>                       <span class="o">|</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">}</span>  <span class="o">|</span> <span class="p">{,,}</span>
</code></pre></div></div>

<h2 id="worloada-experimentdistrict-is-not-splited">worloadA experiment(district is not splited)</h2>

<p>fatestest</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="k">connect</span> <span class="k">to</span> <span class="n">postgresql</span><span class="p">:</span><span class="o">//</span><span class="n">rootuser</span><span class="p">:</span><span class="o">@</span><span class="n">xcnd57</span><span class="p">:</span><span class="mi">27257</span><span class="o">/</span><span class="n">cs5424db</span><span class="p">,</span> <span class="k">Read</span> <span class="n">file</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">stuproj</span><span class="o">/</span><span class="n">cs4224p</span><span class="o">/</span><span class="k">temp</span><span class="o">/</span><span class="n">tasks</span><span class="o">/</span><span class="n">project_files_4</span><span class="o">/</span><span class="n">xact_files_A</span><span class="o">/</span><span class="mi">27</span><span class="p">.</span><span class="n">txt</span> <span class="k">and</span> <span class="n">run</span> <span class="n">workload</span> <span class="n">A</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">required_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">8000</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">1200</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">400</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">succeed_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">8000</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">1200</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">400</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx</span> <span class="n">num</span> <span class="n">percentages</span> <span class="k">is</span><span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'20.0%'</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'20.0%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'40.0%'</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'4.0%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'6.0%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'4.0%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'2.0%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'4.0%'</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx_time_range</span> <span class="p">[</span><span class="k">min</span><span class="o">-</span><span class="k">max</span><span class="p">]</span> <span class="k">is</span> <span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span>
<span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">0940394401550293</span><span class="p">,</span> <span class="mi">18</span><span class="p">.</span><span class="mi">964545726776123</span><span class="p">],</span> 
<span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">008363485336303711</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">4704015254974365</span><span class="p">],</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">022224903106689453</span><span class="p">,</span> <span class="mi">6</span><span class="p">.</span><span class="mi">635453939437866</span><span class="p">],</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">050208330154418945</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">6432342529296875</span><span class="p">],</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">0022013187408447266</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">15984082221984863</span><span class="p">],</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">00648188591003418</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">05884099006652832</span><span class="p">],</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">034255266189575195</span><span class="p">,</span> <span class="mi">7</span><span class="p">.</span><span class="mi">857444524765015</span><span class="p">],</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">020989179611206055</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">47068023681640625</span><span class="p">]}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx_time</span> <span class="n">middle</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">37264513969421387</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">018275022506713867</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">07090187072753906</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1388378143310547</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">00434422492980957</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">013213634490966797</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1091468334197998</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">05873537063598633</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx_time</span> <span class="n">average</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">4993351148366928</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">041156271040439604</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">10065338760614395</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">15924189507961273</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">005224022666613261</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">015345950424671174</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">20358444035053253</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">066924666762352</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx</span> <span class="nb">time</span> <span class="n">percentage</span> <span class="k">is</span> <span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'61.43%'</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'5.063%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'24.76%'</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'3.918%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'0.192%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'0.377%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'2.504%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'1.646%'</span><span class="p">}</span>
<span class="n">total</span> <span class="nb">time</span> <span class="n">used</span><span class="p">:</span> <span class="mi">3251</span><span class="p">.</span><span class="mi">0644114017487</span> <span class="k">second</span>
</code></pre></div></div>

<p>slowest</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
</code></pre></div></div>

<p>Cluster information</p>

<p><img src="https://github.com/NLGithubWP/tech-notebook/raw/master/img/a_img_store/image-20211104210601420.png" alt="image-20211104210601420" /></p>

<p><img src="https://github.com/NLGithubWP/tech-notebook/raw/master/img/a_img_store/image-20211104210658298.png" alt="image-20211104210658298" /></p>

<p><img src="https://github.com/NLGithubWP/tech-notebook/raw/master/img/a_img_store/image-20211104210834426.png" alt="image-20211104210834426" /></p>

<h2 id="workloada-experimentdistrict-is-splitted-why-this-is-so-slow">workloadA experiment(district is splitted) why this is so slow?/</h2>

<p>Fastest</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="k">connect</span> <span class="k">to</span> <span class="n">postgresql</span><span class="p">:</span><span class="o">//</span><span class="n">rootuser</span><span class="p">:</span><span class="o">@</span><span class="n">xcnd55</span><span class="p">:</span><span class="mi">27257</span><span class="o">/</span><span class="n">cs5424db</span><span class="p">,</span> <span class="k">Read</span> <span class="n">file</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">stuproj</span><span class="o">/</span><span class="n">cs4224p</span><span class="o">/</span><span class="k">temp</span><span class="o">/</span><span class="n">tasks</span><span class="o">/</span><span class="n">project_files_4</span><span class="o">/</span><span class="n">xact_files_A</span><span class="o">/</span><span class="mi">25</span><span class="p">.</span><span class="n">txt</span> <span class="k">and</span> <span class="n">run</span> <span class="n">workload</span> <span class="n">A</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">required_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">8000</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">1200</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">400</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">succeed_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">8000</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">1200</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">400</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx</span> <span class="n">num</span> <span class="n">percentages</span> <span class="k">is</span><span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'20.0%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'40.0%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'4.0%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'4.0%'</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'4.0%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'6.0%'</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'20.0%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'2.0%'</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx_time_range</span> <span class="p">[</span><span class="k">min</span><span class="o">-</span><span class="k">max</span><span class="p">]</span> <span class="k">is</span> <span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">09678363800048828</span><span class="p">,</span> <span class="mi">21</span><span class="p">.</span><span class="mi">767359018325806</span><span class="p">],</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">024239063262939453</span><span class="p">,</span> <span class="mi">7</span><span class="p">.</span><span class="mi">722882270812988</span><span class="p">],</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">006879329681396484</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">21355724334716797</span><span class="p">],</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">023659944534301758</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">3360991477966309</span><span class="p">],</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">05456805229187012</span><span class="p">,</span> <span class="mi">3</span><span class="p">.</span><span class="mi">062171220779419</span><span class="p">],</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">002875089645385742</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3323400020599365</span><span class="p">],</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">008802652359008789</span><span class="p">,</span> <span class="mi">15</span><span class="p">.</span><span class="mi">16224193572998</span><span class="p">],</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">028119802474975586</span><span class="p">,</span> <span class="mi">10</span><span class="p">.</span><span class="mi">305521965026855</span><span class="p">]}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx_time</span> <span class="n">middle</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">4503483772277832</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">08659934997558594</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">013454198837280273</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">05750107765197754</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">15394377708435059</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">004498720169067383</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">028304100036621094</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">11582589149475098</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx_time</span> <span class="n">average</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">778711769759655</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3065736477971077</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">016812161803245546</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">07329640686511993</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1976630276441574</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">005740454196929931</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">13048452234268187</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">2747782760858536</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx</span> <span class="nb">time</span> <span class="n">percentage</span> <span class="k">is</span> <span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'48.35%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'38.07%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'0.208%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'0.910%'</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'2.454%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'0.106%'</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'8.101%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'1.706%'</span><span class="p">}</span>
 <span class="n">total</span> <span class="nb">time</span> <span class="n">used</span><span class="p">:</span> <span class="mi">6442</span><span class="p">.</span><span class="mi">281774759293</span> <span class="k">second</span> 
</code></pre></div></div>

<p>slowest</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="k">connect</span> <span class="k">to</span> <span class="n">postgresql</span><span class="p">:</span><span class="o">//</span><span class="n">rootuser</span><span class="p">:</span><span class="o">@</span><span class="n">xcnd55</span><span class="p">:</span><span class="mi">27257</span><span class="o">/</span><span class="n">cs5424db</span><span class="p">,</span> <span class="k">Read</span> <span class="n">file</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">stuproj</span><span class="o">/</span><span class="n">cs4224p</span><span class="o">/</span><span class="k">temp</span><span class="o">/</span><span class="n">tasks</span><span class="o">/</span><span class="n">project_files_4</span><span class="o">/</span><span class="n">xact_files_A</span><span class="o">/</span><span class="mi">35</span><span class="p">.</span><span class="n">txt</span> <span class="k">and</span> <span class="n">run</span> <span class="n">workload</span> <span class="n">A</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">required_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">400</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">8000</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">1200</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">succeed_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">400</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">8000</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">1200</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">800</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx</span> <span class="n">num</span> <span class="n">percentages</span> <span class="k">is</span><span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'20.0%'</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'20.0%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'2.0%'</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'4.0%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'40.0%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'6.0%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'4.0%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'4.0%'</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx_time_range</span> <span class="p">[</span><span class="k">min</span><span class="o">-</span><span class="k">max</span><span class="p">]</span> <span class="k">is</span> <span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">10470461845397949</span><span class="p">,</span> <span class="mi">20</span><span class="p">.</span><span class="mi">285513401031494</span><span class="p">],</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">008340835571289062</span><span class="p">,</span> <span class="mi">19</span><span class="p">.</span><span class="mi">08874011039734</span><span class="p">],</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">03162956237792969</span><span class="p">,</span> <span class="mi">168</span><span class="p">.</span><span class="mi">91484308242798</span><span class="p">],</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">05150938034057617</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0880217552185059</span><span class="p">],</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">026800155639648438</span><span class="p">,</span> <span class="mi">29</span><span class="p">.</span><span class="mi">250999450683594</span><span class="p">],</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">0022656917572021484</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">07593226432800293</span><span class="p">],</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">007979154586791992</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">07962322235107422</span><span class="p">],</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">023247480392456055</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">7286357879638672</span><span class="p">]}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx_time</span> <span class="n">middle</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">498460054397583</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">02234649658203125</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">13301682472229004</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">13823652267456055</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">25033116340637207</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">004361867904663086</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">013583898544311523</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">060243844985961914</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx_time</span> <span class="n">average</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">7653842960596084</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">09842191231250763</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">1</span><span class="p">.</span><span class="mi">104385917186737</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">17024195492267608</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">6707052890062332</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">005735321044921875</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">016672326028347017</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">07074818849563598</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx</span> <span class="nb">time</span> <span class="n">percentage</span> <span class="k">is</span> <span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'32.29%'</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'4.153%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'4.660%'</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'1.436%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'56.60%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'0.072%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'0.140%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'0.597%'</span><span class="p">}</span>
<span class="n">total</span> <span class="nb">time</span> <span class="n">used</span><span class="p">:</span> <span class="mi">9479</span><span class="p">.</span><span class="mi">322530269623</span> <span class="k">second</span> 
</code></pre></div></div>

<h2 id="check-workloadb-tables-range-information">check workloadB tables range information</h2>

<h2 id="workloadb-experimentdistrict-is-splitted">workloadB experiment(district is splitted)</h2>

<p>Fastest</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">required_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">1000</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">succeed_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">1000</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx</span> <span class="n">num</span> <span class="n">percentages</span> <span class="k">is</span><span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'20.0%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'10.0%'</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'5.0%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'10.0%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'20.0%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'20.0%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'10.0%'</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'5.0%'</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx_time_range</span> <span class="p">[</span><span class="k">min</span><span class="o">-</span><span class="k">max</span><span class="p">]</span> <span class="k">is</span> <span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">029532432556152344</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">1351370811462402</span><span class="p">],</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">005969047546386719</span><span class="p">,</span> <span class="mi">11</span><span class="p">.</span><span class="mi">313726663589478</span><span class="p">],</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">007120609283447266</span><span class="p">,</span> <span class="mi">4</span><span class="p">.</span><span class="mi">932584524154663</span><span class="p">],</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">01968860626220703</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">7491550445556641</span><span class="p">],</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">019487619400024414</span><span class="p">,</span> <span class="mi">39</span><span class="p">.</span><span class="mi">51293349266052</span><span class="p">],</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">002714395523071289</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0668337345123291</span><span class="p">],</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">028239965438842773</span><span class="p">,</span> <span class="mi">10</span><span class="p">.</span><span class="mi">329297065734863</span><span class="p">],</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">08482646942138672</span><span class="p">,</span> <span class="mi">6</span><span class="p">.</span><span class="mi">401065826416016</span><span class="p">]}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx_time</span> <span class="n">middle</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">09830760955810547</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">011962413787841797</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">011313438415527344</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">04557657241821289</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">2080976963043213</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">004521608352661133</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">9234161376953125</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">15929460525512695</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx_time</span> <span class="n">average</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">10706163960695267</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">01982469952106476</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">039915404081344606</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">056616720080375674</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">28210580748319625</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">005966431319713593</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0354568886756896</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">18945905900001525</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx</span> <span class="nb">time</span> <span class="n">percentage</span> <span class="k">is</span> <span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'10.60%'</span><span class="p">,</span> <span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'0.982%'</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'0.988%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'2.804%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'27.94%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'0.591%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'51.29%'</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'4.692%'</span><span class="p">}</span>
 <span class="n">total</span> <span class="nb">time</span> <span class="n">used</span><span class="p">:</span> <span class="mi">4037</span><span class="p">.</span><span class="mi">345842599869</span> <span class="k">second</span>
</code></pre></div></div>

<p>slowest</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">required_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">2000</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">succeed_tx_types</span> <span class="k">is</span><span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">2000</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx</span> <span class="n">num</span> <span class="n">percentages</span> <span class="k">is</span><span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'10.0%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'20.0%'</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'5.0%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'20.0%'</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'20.0%'</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'5.0%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'10.0%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'10.0%'</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx_time_range</span> <span class="p">[</span><span class="k">min</span><span class="o">-</span><span class="k">max</span><span class="p">]</span> <span class="k">is</span> <span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">0071184635162353516</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">09766054153442383</span><span class="p">],</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">003351449966430664</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">21988606452941895</span><span class="p">],</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">10575675964355469</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0390677452087402</span><span class="p">],</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">02222919464111328</span><span class="p">,</span> <span class="mi">51</span><span class="p">.</span><span class="mi">281330585479736</span><span class="p">],</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">037384986877441406</span><span class="p">,</span> <span class="mi">11</span><span class="p">.</span><span class="mi">277520179748535</span><span class="p">],</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">010007619857788086</span><span class="p">,</span> <span class="mi">2</span><span class="p">.</span><span class="mi">8379220962524414</span><span class="p">],</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">03411602973937988</span><span class="p">,</span> <span class="mi">10</span><span class="p">.</span><span class="mi">52436900138855</span><span class="p">],</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">01657843589782715</span><span class="p">,</span> <span class="mi">3</span><span class="p">.</span><span class="mi">6650354862213135</span><span class="p">]}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx_time</span> <span class="n">middle</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">015763521194458008</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">006165504455566406</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">19103074073791504</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">2876155376434326</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">10260510444641113</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">01948404312133789</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">9821634292602539</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">04608583450317383</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx_time</span> <span class="n">average</span> <span class="nb">time</span> <span class="k">is</span> <span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">019520679593086242</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">008644869148731232</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">2155011205673218</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3969092663526535</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">11523041915893555</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">04866554617881775</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="mi">1</span><span class="p">.</span><span class="mi">076444769501686</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">05775388872623444</span><span class="p">}</span>
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:</span><span class="o">=======&gt;</span> <span class="n">tx</span> <span class="nb">time</span> <span class="n">percentage</span> <span class="k">is</span> <span class="p">:</span> 
<span class="n">INFO</span><span class="p">:</span><span class="n">__main__</span><span class="p">:{</span><span class="s1">'OrderStatusTxParams'</span><span class="p">:</span> <span class="s1">'0.837%'</span><span class="p">,</span> <span class="s1">'TopBalanceTxParams'</span><span class="p">:</span> <span class="s1">'0.742%'</span><span class="p">,</span> <span class="s1">'DeliveryTxParams'</span><span class="p">:</span> <span class="s1">'4.624%'</span><span class="p">,</span> <span class="s1">'RelCustomerTxParams'</span><span class="p">:</span> <span class="s1">'34.07%'</span><span class="p">,</span> <span class="s1">'PopItemTxParams'</span><span class="p">:</span> <span class="s1">'9.892%'</span><span class="p">,</span> <span class="s1">'PaymentTxParams'</span><span class="p">:</span> <span class="s1">'1.044%'</span><span class="p">,</span> <span class="s1">'NewOrderTxParams'</span><span class="p">:</span> <span class="s1">'46.20%'</span><span class="p">,</span> <span class="s1">'StockLevelTxParams'</span><span class="p">:</span> <span class="s1">'2.478%'</span><span class="p">}</span>

<span class="n">total</span> <span class="nb">time</span> <span class="n">used</span><span class="p">:</span> <span class="mi">4659</span><span class="p">.</span><span class="mi">487995624542</span> <span class="k">second</span> 
</code></pre></div></div>

<h2 id="compare">Compare</h2>

<p><img src="https://github.com/NLGithubWP/tech-notebook/raw/master/img/a_img_store/image-20211105112236084.png" alt="image-20211105112236084" /></p>

<p><img src="https://github.com/NLGithubWP/tech-notebook/raw/master/img/a_img_store/image-20211105112413638.png" alt="image-20211105112413638" /></p>

<p><img src="https://github.com/NLGithubWP/tech-notebook/raw/master/img/a_img_store/image-20211105112732164.png" alt="image-20211105112732164" /></p>

<h1 id="errors-and-problems">Errors and problems</h1>

<h2 id="slow-querys">Slow querys</h2>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">//</span> <span class="k">in</span> <span class="n">NewOrder</span><span class="p">,</span> <span class="n">it</span> <span class="n">takes</span> <span class="mi">17</span><span class="o">-</span><span class="mi">20</span><span class="n">s</span> <span class="n">sometimes</span><span class="p">,</span> <span class="k">in</span> <span class="n">heavy</span> <span class="k">select</span> <span class="n">worklaod</span>
<span class="k">UPDATE</span> <span class="n">district</span> <span class="k">SET</span> <span class="n">D_NEXT_O_ID</span> <span class="o">=</span> <span class="n">D_NEXT_O_ID</span> <span class="o">+</span> <span class="mi">1</span> <span class="k">WHERE</span> <span class="n">D_W_ID</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">and</span> <span class="n">D_ID</span> <span class="o">=</span> <span class="mi">2</span> <span class="n">returning</span> <span class="n">D_NEXT_O_ID</span><span class="p">,</span> <span class="n">d_tax</span><span class="p">;</span> 
</code></pre></div></div>

<h2 id="set-transaction-timestamp-cause-read">Set Transaction timestamp cause read</h2>

<p>if set transaction timestamp, it’s a read only transaction.</p>

<p>Option1</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">#</span> <span class="k">get</span> <span class="k">current</span> <span class="nb">time</span>
<span class="n">cur</span><span class="p">.</span><span class="k">execute</span><span class="p">(</span><span class="nv">"SELECT CURRENT_TIMESTAMP;"</span><span class="p">)</span>            <span class="n">cur_times</span> <span class="o">=</span> <span class="n">cur</span><span class="p">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="n">modified_time</span> <span class="o">=</span> <span class="n">cur_times</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span>	   		   <span class="nb">datetime</span><span class="p">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="o">#</span> <span class="k">update</span> <span class="nb">time</span> <span class="k">to</span> <span class="k">read</span> <span class="n">historical</span> <span class="k">data</span>
<span class="n">cur</span><span class="p">.</span><span class="k">execute</span><span class="p">(</span><span class="nv">"SET TRANSACTION AS OF SYSTEM TIME
            '{}';"</span><span class="p">.</span><span class="n">format</span><span class="p">(</span><span class="n">str</span><span class="p">(</span><span class="n">modified_time</span><span class="p">)))</span>
<span class="o">#</span> <span class="k">check</span> <span class="k">current</span> <span class="nb">time</span>
<span class="n">cur</span><span class="p">.</span><span class="k">execute</span><span class="p">(</span><span class="nv">"SELECT CURRENT_TIMESTAMP;"</span><span class="p">)</span>
<span class="n">cur_times</span> <span class="o">=</span> <span class="n">cur</span><span class="p">.</span><span class="n">fetchall</span><span class="p">()</span>

</code></pre></div></div>

<p>Option2</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cur</span><span class="p">.</span><span class="k">execute</span><span class="p">(</span><span class="nv">"SET TRANSACTION AS OF SYSTEM TIME '-10s'"</span><span class="p">)</span>
</code></pre></div></div>

<p>Error</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cannot</span> <span class="k">execute</span> <span class="k">UPDATE</span> <span class="k">in</span> <span class="n">a</span> <span class="k">read</span><span class="o">-</span><span class="k">only</span> <span class="n">transaction</span>
</code></pre></div></div>

<h2 id="bbort-reason-pusher-aborted-error">Bbort reason Pusher Aborted Error</h2>

<h3 id="deadlock">Deadlock?</h3>

<p>https://www.cockroachlabs.com/docs/stable/architecture/transaction-layer.html</p>

<p><strong>Deadlock</strong>: Some transaction <em>B</em> is trying to acquire conflicting locks in reverse order from transaction <em>A</em>.</p>

<p>If there is a deadlock between transactions (i.e., they’re each blocked by each other’s Write Intents), one of the transactions is randomly aborted. In the above example, this would happen if <code class="language-plaintext highlighter-rouge">TxnA</code> blocked <code class="language-plaintext highlighter-rouge">TxnB</code> on <code class="language-plaintext highlighter-rouge">key1</code> and <code class="language-plaintext highlighter-rouge">TxnB</code> blocked <code class="language-plaintext highlighter-rouge">TxnA</code> on <code class="language-plaintext highlighter-rouge">key2</code>.</p>

<p><strong>If you are encountering deadlocks</strong>: Avoid producing deadlocks in your application by making sure that transactions acquire locks in the same order.</p>

<p>Sequences:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">new_order_tx</span><span class="p">:</span> 
	<span class="k">update</span> <span class="n">district</span>
	<span class="k">insert</span> <span class="n">order_ori</span>
	<span class="k">update</span> <span class="n">stock</span>
	<span class="k">insert</span> <span class="n">order_line</span>
<span class="n">payment_tx</span><span class="p">:</span>
	<span class="k">update</span> <span class="n">district</span>
	<span class="k">update</span> <span class="n">warehouse</span>
	<span class="k">update</span> <span class="n">customer</span>
<span class="n">delivery_tx</span><span class="p">:</span>
	<span class="k">update</span> <span class="n">order_ori</span>
	<span class="k">update</span> <span class="n">order_line</span>
	<span class="k">update</span> <span class="n">customer</span>
</code></pre></div></div>

<h2 id="write-write-conflict">Write-Write conflict?</h2>

<p>Write-write conflict: Another <a href="https://www.cockroachlabs.com/docs/v21.1/transactions#transaction-priorities">high-priority transaction</a> <em>B</em> encountered a write intent by our transaction <em>A</em>, and tried to push <em>A</em>’s timestamp.</p>

<p>Try to set paymentTx to higher priority since it;s has less work to do/</p>

<h2 id="follower-read-1">Follower-Read</h2>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="n">use</span> <span class="k">of</span> <span class="n">follower</span> <span class="k">reads</span> <span class="n">requires</span> <span class="n">an</span> <span class="n">enterprise</span> <span class="n">license</span><span class="p">.</span> <span class="n">see</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">cockroachlabs</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">pricing</span><span class="o">?</span><span class="k">cluster</span><span class="o">=</span><span class="n">f9c9840d</span><span class="o">-</span><span class="mi">6</span><span class="n">db4</span><span class="o">-</span><span class="mi">46</span><span class="n">cc</span><span class="o">-</span><span class="mi">92</span><span class="n">f4</span><span class="o">-</span><span class="mi">77586</span><span class="n">d10c151</span> <span class="k">for</span> <span class="n">details</span> <span class="k">on</span> <span class="n">how</span> <span class="k">to</span> <span class="n">enable</span> <span class="n">enterprise</span> <span class="n">features</span> <span class="k">from</span> <span class="k">current</span> <span class="k">statement</span> <span class="nb">time</span> <span class="k">instead</span>
<span class="n">NOTICE</span><span class="p">:</span> <span class="o">-</span><span class="mi">4</span><span class="p">.</span><span class="mi">8</span><span class="n">s</span><span class="p">:</span> <span class="k">using</span> <span class="n">use</span> <span class="k">of</span> <span class="n">follower</span> <span class="k">reads</span> <span class="n">requires</span> <span class="n">an</span> <span class="n">enterprise</span> <span class="n">license</span><span class="p">.</span> <span class="n">see</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">cockroachlabs</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">pricing</span><span class="o">?</span><span class="k">cluster</span><span class="o">=</span><span class="n">f9c9840d</span><span class="o">-</span><span class="mi">6</span><span class="n">db4</span><span class="o">-</span><span class="mi">46</span><span class="n">cc</span><span class="o">-</span><span class="mi">92</span><span class="n">f4</span><span class="o">-</span><span class="mi">77586</span><span class="n">d10c151</span> <span class="k">for</span> <span class="n">details</span> <span class="k">on</span> <span class="n">how</span> <span class="k">to</span> <span class="n">enable</span> <span class="n">enterprise</span> <span class="n">features</span> <span class="k">from</span> <span class="k">current</span> <span class="k">statement</span> <span class="nb">time</span> <span class="k">instead</span>
 <span class="n">total</span> <span class="p">(</span><span class="n">execution</span> <span class="mi">3</span><span class="n">ms</span> <span class="o">/</span> <span class="n">network</span> <span class="mi">1</span><span class="n">ms</span><span class="p">)</span>
</code></pre></div></div>

<h1 id="something-found">Something found</h1>

<h2 id="读历史数据">读历史数据</h2>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SET</span> <span class="n">TRANSACTION</span> <span class="k">AS</span> <span class="k">OF</span> <span class="k">SYSTEM</span> <span class="nb">TIME</span> <span class="s1">'-5s'</span>
</code></pre></div></div>

<p>意思是把当前tx的timestamp设置成5秒前的，如果5秒前就已经被其他事务在更新，那么还是会等待。</p>

<p>start(b) - start(a)  &gt; 5 还是读不到，
start(b) - start(a) &lt;5 才可以
所以这个越大，并发读越高, 但是读的越老</p>

<h2 id="why-need-manully-split">why need manully split?</h2>

<h2 id="update-阻塞select-default-isolation-level">update 阻塞select?? default isolation level??</h2>

<h2 id="一个tx加锁">一个tx加锁</h2>

<p>一个tx 有多条update，遇到update才对该数据加锁，而不是一开始就对本tx所有操作的加锁 <strong>(死锁的来源)</strong></p>

<h2 id="小表leftjoin-大表">小表leftjoin 大表</h2>

<p>左边小表数据很重复多条，匹配右边</p>

<h2 id="大表right-join小表">大表right join小表</h2>

<p>和上面的结果一样</p>

<h2 id="join表缓存">join表缓存？</h2>

<p>多次select..join和单次一样</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
</code></pre></div></div>

<h2 id="in-用index吗why">IN 用index吗？（why）</h2>

<p>有时候用到，有时候用不到。 Why？？？</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">explain</span> <span class="k">SELECT</span> <span class="n">OL_W_ID</span><span class="p">,</span> <span class="n">OL_D_ID</span><span class="p">,</span> <span class="n">OL_O_ID</span><span class="p">,</span> <span class="n">OL_I_ID</span> <span class="k">FROM</span> <span class="n">order_line</span> <span class="k">WHERE</span> <span class="n">ol_i_id</span> <span class="k">in</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">10</span><span class="p">);</span>
</code></pre></div></div>

<p>如果在创建表的时候，没建立索引，而是后面在create index，，，就没用到</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
</code></pre></div></div>

<p>结论： 用in的时候，索引要在表创建的时候，就创建好，</p>

<h2 id="join-operations">Join operations</h2>

<h4 id="lookup-join">Lookup join:</h4>

<p>The <a href="https://www.cockroachlabs.com/docs/v21.1/cost-based-optimizer">cost-based optimizer</a> decides when it would be beneficial to use a lookup join.</p>

<p><strong>Lookup joins are used when there is a large imbalance in size between the two tables, as it only reads the smaller table and then looks up matches in the larger table.</strong></p>

<p>A lookup join requires that the right-hand (i.e., larger) table be indexed on the equality column. A <a href="https://www.cockroachlabs.com/docs/v21.1/partial-indexes">partial index</a> can only be used if it contains the subset of rows being looked up.</p>

<p>Lookup joins are performed on two tables as follows:</p>

<ol>
  <li>CockroachDB reads each row in the small table.</li>
  <li>CockroachDB then scans (or “looks up”) the larger table for matches to the smaller table and outputs the matching rows.</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code></code></pre></div></div>

<h4 id="hash-join">Hash Join</h4>

<p>If a merge join cannot be used, CockroachDB uses a <a href="https://en.wikipedia.org/wiki/Hash_join">hash join</a>. Hash joins are computationally expensive and require additional memory.</p>

<p>Hash joins are performed on two tables as follows:</p>

<ol>
  <li>CockroachDB reads both tables and attempts to pick the smaller table.</li>
  <li>CockroachDB creates an in-memory <a href="https://en.wikipedia.org/wiki/Hash_table">hash table</a> on the smaller table. If the hash table is too large, it will spill over to disk storage (which could affect performance).</li>
  <li>CockroachDB then scans the large table, looking up each row in the hash table.</li>
</ol>

<h4 id="merge-join">Merge Join</h4>

<p>To perform a <a href="https://en.wikipedia.org/wiki/Sort-merge_join">merge join</a> of two tables, <strong>both tables must be indexed on the equality columns, and any indexes must have the same ordering.</strong></p>

<p>Merge joins offer better computational performance and more efficient memory usage than <a href="https://www.cockroachlabs.com/docs/stable/joins.html#hash-joins">hash joins</a>. When tables and indexes are ordered for a merge, CockroachDB chooses to use merge joins over hash joins, by default. When merge conditions are not met, CockroachDB resorts to the slower hash joins. Merge joins can be used only with <a href="https://www.cockroachlabs.com/blog/local-and-distributed-processing-in-cockroachdb/">distributed query processing</a>.</p>

<p>Merge joins are performed on the indexed columns of two tables as follows:</p>

<ol>
  <li>CockroachDB checks for indexes on the equality columns and that they are ordered the same (i.e., <code class="language-plaintext highlighter-rouge">ASC</code> or <code class="language-plaintext highlighter-rouge">DESC</code>).</li>
  <li>CockroachDB takes one row from each table and compares them.
    <ul>
      <li>For inner joins:
        <ul>
          <li>If the rows are equal, CockroachDB returns the rows.</li>
          <li>If there are multiple matches, the cartesian product of the matches is returned.</li>
          <li>If the rows are not equal, CockroachDB discards the lower-value row and repeats the process with the next row until all rows are processed.</li>
        </ul>
      </li>
      <li>For outer joins:
        <ul>
          <li>If the rows are equal, CockroachDB returns the rows.</li>
          <li>If there are multiple matches, the cartesian product of the matches is returned.</li>
          <li>If the rows are not equal, CockroachDB returns <code class="language-plaintext highlighter-rouge">NULL</code> for the non-matching column and repeats the process with the next row until all rows are processed.</li>
        </ul>
      </li>
    </ul>
  </li>
</ol>


                <br>
          <br>
    <br>


<!--               <div class="post-author text-center">                       
	        <img src="/tech-notebook/img/" alt="'s photo" itemprop="image" class="post-avatar img-circle img-responsive"/>    
	    <h4>By <span itemprop="name" class="fn"><a href="/tech-notebook/about/" title="About " itemprop="url"></a></span></h4>
	    <div style="font-family: Open Sans, Helvetica Neue, Helvetica, Arial, sans-serif; display:inline-block;font-size:.75em;"></div>
</div> -->
    <hr class="small">
 <div class="post-share text-center">
    <p class="light small">
        <h6>END OF POST</h6>
    </p>
    <ul class="social-mini">

    </ul>
</div>
                        

                        
                <br>

                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/tech-notebook/journal/debug_python_memory/" data-toggle="tooltip" data-placement="top" title="python memory bug reports">&larr; Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/tech-notebook/journal/cockroachDB-opt/" data-toggle="tooltip" data-placement="top" title="cockroachDB-opt">Next Post &rarr;</a>
                    </li>
                    
                </ul>

        </div>
    </div>
</article>

<br>

<hr class="medium">

            <div class="tags-wrap">
   <div class="tags">

  <div class="section-heading group" style="color: #fff; text-align: center; margin-top: 10px;">

    <h3>Tags Cloud</h3>

  </div>










  <div class="tag-list">
    
  </div>

</div>

<hr class="medium">

<div class="categories">

  <div class="section-heading group" style="color: #fff; text-align: center; margin-top: 10px;">

    <h3>Categories Cloud</h3>

  </div>

 









 <div class="category-list">
   
<a href="/tech-notebook/journal/category//">  </a> &nbsp;&nbsp;

<a href="/tech-notebook/journal/category/a-paper-note/"> A paper note </a> &nbsp;&nbsp;

<a href="/tech-notebook/journal/category/cmu-database/"> CMU database </a> &nbsp;&nbsp;

<a href="/tech-notebook/journal/category/coding/"> coding </a> &nbsp;&nbsp;

<a href="/tech-notebook/journal/category/devices/"> devices </a> &nbsp;&nbsp;

<a href="/tech-notebook/journal/category/distributed-database/"> distributed database </a> &nbsp;&nbsp;

<a href="/tech-notebook/journal/category/machine-learning-basic/"> machine learning basic </a> &nbsp;&nbsp;

<a href="/tech-notebook/journal/category/operation-system/"> operation system </a> &nbsp;&nbsp;

<a href="/tech-notebook/journal/category/practise/"> practise </a> &nbsp;&nbsp;

<a href="/tech-notebook/journal/category/programming-language/"> programming language </a> &nbsp;&nbsp;

  </div>

</div>

<hr class="medium">

<br>
<br>

       </div>


<!-- jQuery -->    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<!-- Custom Theme JavaScript -->
<script src="/tech-notebook/js/main.min.js "></script>
<!-- include image popups -->
<script src="/tech-notebook/js/jquery.magnific-popup.js"></script>

<script type="text/javascript">
      $(document).ready(function($) {
        $('a.popup').magnificPopup({
         type: 'image',
	  gallery:{
         enabled:true,
         navigateByImgClick: true,
         preload: [0,1] // Will preload 0 - before current, and 1 after the current image
       },
image: {
      titleSrc: function(item) {
              return item.el.attr('title') + '&nbsp;' + item.el.attr('data-caption');
            }
        }
          // other options
      });
});
    </script>

<script src="/tech-notebook/js/retina.min.js"></script>
<!-- include Masonry -->
<script src="/tech-notebook/js/isotope.pkgd.min.js"></script> 
<!-- include mousewheel plugins -->
<script src="/tech-notebook/js/jquery.mousewheel.min.js"></script>
<!-- include carousel plugins -->
<script src="/tech-notebook/js/jquery.tinycarousel.min.js"></script>
<!-- include svg line drawing plugin -->
<script src="/tech-notebook/js/jquery.lazylinepainter.min.js"></script>
<!-- include custom script -->
<script src="/tech-notebook/js/scripts.js"></script>
<!-- Modernizr -->
 <script src="/tech-notebook/js/modernizr.js"></script>

</body>
</html>






    <a href="javascript:void(0)" title="SEARCH" onclick="superSearch.toggle()" class="super-search-btn">
<span class="fa fa-search" style="font-size:1em; position:fixed; right: .75em; top: 1em; z-index: 2;"></span>
</a>
<div class="super-search" id="js-super-search">
<a href="javascript:void(0)" onclick="superSearch.toggle()" class="super-search__close-btn"">
<span class="fa fa-close" style="font-size:48px;"></span>
</a>
<input type="text" placeholder="Type here to search" class="super-search__input" id="js-super-search__input">
<ul class="super-search__results" id="js-super-search__results"></ul>
</div>



 <script src="/tech-notebook/js/super-search.js"></script>

<script>
superSearch({
    searchFile: '/tech-notebook/feed.xml',
    searchSelector: '#js-super-search', // CSS Selector for search container element.
    inputSelector: '#js-super-search__input', // CSS selector for <input>
    resultsSelector: '#js-super-search__results' // CSS selector for results container
});
</script>

    
        <div class="row"  style="background-color: #530720; padding-bottom: 40px; margin-top: 50px; margin-bottom: 80px;">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">

      <center><h4><p>It's the niceties that make the difference fate gives us the hand, and we play the cards.</h4></center>


<!--<form style="padding:3px;text-align:center;font-family: 'Open Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:12px;" action="https://tinyletter.com/photorgasms" method="post" target="popupwindow" onsubmit="window.open('https://tinyletter.com/yourproject', 'popupwindow', 'scrollbars=yes,width=800,height=600');return true"><input type="text" placeholder="Enter your email address"  style="width:200px;height:30px;border:0;background-color:#5A0F28;color:#dddddd;outline:0;padding-left:12px;" name="email" id="tlemail" />&nbsp; &nbsp; <input type="submit" value="Get notified!" style="background-color:#470118;color:#dddddd;height:30px;border:0;" /></form>-->
            </div>
        </div>
     
<style type="text/css">
        .tlemail::-webkit-input-placeholder {
   color: rgba(255,255,255,.45);
}
       .tlemail:-moz-placeholder { /* Firefox 18- */
   color: rgba(255,255,255,.45);  
}

      .tlemail::-moz-placeholder {  /* Firefox 19+ */
   color: rgba(255,255,255,.45);  
}

      .tlemail:-ms-input-placeholder {  
   color: rgba(255,255,255,.45);  
}
    </style>


    <!-- Footer -->
<footer>
<div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">

                <ul class="list-inline text-center">

<!--                    -->
<!--                    <li>-->
<!--                        <a href="https://facebook.com/" data-toggle="tooltip" title="Facebook">-->
<!--                            <span class="fa-stack fa-lg">-->
<!--                                <i class="fa fa-circle fa-stack-2x"></i>-->
<!--                                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>-->
<!--                            </span>-->
<!--                        </a>-->
<!--                    </li>-->
<!--                    -->
<!--                    -->
<!--                    <li>-->
<!--                        <a href="https://twitter.com/" data-toggle="tooltip" title="Twiiter">-->
<!--                            <span class="fa-stack fa-lg">-->
<!--                                <i class="fa fa-circle fa-stack-2x"></i>-->
<!--                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>-->
<!--                            </span>-->
<!--                        </a>-->
<!--                    </li>-->
<!--                    -->
<!--                    -->
<!--                    <li>-->
<!--                        <a href="https://instagram.com/" data-toggle="tooltip" title="Instagram">-->
<!--                            <span class="fa-stack fa-lg">-->
<!--                                <i class="fa fa-circle fa-stack-2x"></i>-->
<!--                                <i class="fa fa-instagram fa-stack-1x fa-inverse"></i>-->
<!--                            </span>-->
<!--                        </a>-->
<!--                    </li>-->
<!--                    -->
<!--                    -->
<!--                    <li>-->
<!--                        <a href="https://flickr.com/photos/" data-toggle="tooltip" title="Flickr">-->
<!--                            <span class="fa-stack fa-lg">-->
<!--                                <i class="fa fa-circle fa-stack-2x"></i>-->
<!--                                <i class="fa fa-flickr fa-stack-1x fa-inverse"></i>-->
<!--                            </span>-->
<!--                        </a>-->
<!--                    </li>-->
<!--                    -->
<!--                    -->
<!--                    <li>-->
<!--                        <a href="http://.deviantart.com">-->
<!--                            <span class="fa-stack fa-lg" data-toggle="tooltip" title="Deviantart">-->
<!--                                <i class="fa fa-circle fa-stack-2x"></i>-->
<!--                                <i class="fa fa-deviantart fa-stack-1x fa-inverse"></i>-->
<!--                            </span>-->
<!--                        </a>-->
<!--                    </li>-->
<!--                    -->
                    
                    <li>
                        <a href="https://github.com/NLGithubWP/tech-notebook" data-toggle="tooltip" title="Github">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
<!--            <li>-->
<!--    <a href="mailto:" data-toggle="tooltip" target="_blank" title="Email">-->
<!--                       <span class="fa-stack fa-lg">-->
<!--                                <i class="fa fa-circle fa-stack-2x"></i>-->
<!--                                <i class="fa fa-envelope-o fa-stack-1x fa-inverse"></i>-->
<!--</span>-->
<!--          </a> </li>-->

<!--         <li>-->
<!--                        <a href="/tech-notebook/feed.xml" data-toggle="tooltip" title="Feed">-->
<!--                            <span class="fa-stack fa-lg">-->
<!--                                <i class="fa fa-circle fa-stack-2x"></i>-->
<!--                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>-->
<!--                            </span>-->
<!--                        </a>-->
<!--                    </li>-->
                </ul>
                <p class="copyright text-muted">Copyright &copy; NoteBook 2024</p>
<center><h6><p>Powered by <a href="https://github.com/jekyll/">Jekyll</a>.</p></h6></center>
            </div>
        </div>
    </div>
</footer>


   <script>
//** jQuery Scroll to Top Control script- (c) 
//** v1.1 (April 7th, 10')
//** 1) Adds ability to scroll to an absolute position (from top of page) or specific element on the page instead.
//** 2) Fixes scroll animation not working in Opera. 
var scrolltotop={
//startline: Integer. Number of pixels from top of doc scrollbar is scrolled before showing control
//scrollto: Keyword (Integer, or "Scroll_to_Element_ID"). How far to scroll document up when control is clicked on (0=top).
setting: {startline:100, scrollto: 0, scrollduration:1000, fadeduration:[500, 100]},
controlHTML: '<img src="https://cloud.githubusercontent.com/assets/14811095/13691821/88412468-e744-11e5-8bb5-94340afd92e7.png" style="filter:alpha(opacity=100); -moz-opacity:1;"/>', //HTML for control, which is auto wrapped in DIV w/ ID="topcontrol"
controlattrs: {offsetx:35, offsety:60}, //offset of control relative to right/ bottom of window corner
anchorkeyword: '#top', //Enter href value of HTML anchors on the page that should also act as "Scroll Up" links
state: {isvisible:false, shouldvisible:false},
scrollup:function(){
if (!this.cssfixedsupport) //if control is positioned using JavaScript
this.$control.css({opacity:0}) //hide control immediately after clicking it
var dest=isNaN(this.setting.scrollto)? this.setting.scrollto : parseInt(this.setting.scrollto)
if (typeof dest=="string" && jQuery('#'+dest).length==1) //check element set by string exists
dest=jQuery('#'+dest).offset().top
else
dest=0
this.$body.animate({scrollTop: dest}, this.setting.scrollduration);
},
keepfixed:function(){
var $window=jQuery(window)
var controlx=$window.scrollLeft() + $window.width() - this.$control.width() - this.controlattrs.offsetx
var controly=$window.scrollTop() + $window.height() - this.$control.height() - this.controlattrs.offsety
this.$control.css({left:controlx+'px', top:controly+'px'})

},

togglecontrol:function(){
var scrolltop=jQuery(window).scrollTop()
if (!this.cssfixedsupport)
this.keepfixed()
this.state.shouldvisible=(scrolltop>=this.setting.startline)? true : false
if (this.state.shouldvisible && !this.state.isvisible){
this.$control.stop().animate({opacity:1}, this.setting.fadeduration[0])
this.state.isvisible=true
}
else if (this.state.shouldvisible==false && this.state.isvisible){
this.$control.stop().animate({opacity:0}, this.setting.fadeduration[1])
this.state.isvisible=false
}

},
init:function(){
jQuery(document).ready(function($){
var mainobj=scrolltotop
var iebrws=document.all

mainobj.cssfixedsupport=!iebrws || iebrws && document.compatMode=="CSS1Compat" && window.XMLHttpRequest //not IE or IE7+ browsers in standards mode
mainobj.$body=(window.opera)? (document.compatMode=="CSS1Compat"? $('html') : $('body')) : $('html,body')
mainobj.$control=$('<div id="topcontrol">'+mainobj.controlHTML+'</div>')
.css({position:mainobj.cssfixedsupport? 'fixed' : 'absolute', bottom:mainobj.controlattrs.offsety, right:mainobj.controlattrs.offsetx, opacity:0, cursor:'pointer'})
.attr({title:'Scroll To Top'})
.click(function(){mainobj.scrollup(); return false})
.appendTo('body')

if (document.all && !window.XMLHttpRequest && mainobj.$control.text()!='') //loose check for IE6 and below, plus whether control contains any text
mainobj.$control.css({width:mainobj.$control.width()}) //IE6- seems to require an explicit width on a DIV containing text
mainobj.togglecontrol()

$('a[href="' + mainobj.anchorkeyword +'"]').click(function(){
mainobj.scrollup()

return false
})

$(window).bind('scroll resize', function(e){

mainobj.togglecontrol()

})

})

}

}

scrolltotop.init()
</script>  

</body>

</html>
